@model Fast.Web.Models.LPH.LPHEditModel
@using Newtonsoft.Json;
@using Fast.Web.Resources;
@{
    ViewBag.Title = "Edit Packer";
    var selected = "";

    var myspecial = ViewBag.Special;
}


@* chanif: tambah css untuk select2 *@
@section CSS_lib{
    <link href="~/Content/dashforge/lib/select2/css/select2.min.css" rel="stylesheet">
}
@section Styles{

    <style>
        .tableWrapper {
            position: relative;
            overflow: auto;
            max-height: 150px;
            transform: translateZ(0);
        }

            .tableWrapper table {
                border-collapse: collapse;
                width: 100%;
            }

            .tableWrapper thead th, .tableWrapper thead td {
                position: sticky;
                background: #066fcb;
                z-index: 100;
                border: none;
            }

            .tableWrapper table tfoot td {
                position: sticky;
                bottom: 0;
                z-index: 100;
            }

            .tableWrapper .input td {
                background: white;
            }

            .tableWrapper .summary-body td {
                font-weight: bold;
                background-color: #d8eafe;
                color: #000;
            }

        .fa {
            padding: 5px;
            cursor: pointer;
        }

        .fas {
            cursor: pointer;
        }

        .input-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .input-img-card {
            margin-left: 5px;
            margin-right: 5px;
        }

        .modal-body {
            position: relative;
            margin-top: 10px;
        }

            .modal-body .close {
                padding: 5px;
                position: absolute;
                top: -5px;
                right: 5px;
                font-size: 15px;
                color: black;
                z-index: 1000;
            }

        .stepper {
            position: relative;
        }

            .stepper:before {
                top: 15px;
                bottom: 0;
                position: absolute;
                content: " ";
                width: 100%;
                height: 1px;
                background: #f1f1f1;
                z-index: 0;
            }

        .stepper-step {
            text-align: center;
            position: relative;
        }

            .stepper-step.active .stepper-btn {
                background: #37b6fa;
                color: white;
                font-weight: 500;
                border: 0
            }

        .stepper-btn {
            width: 30px;
            height: 30px;
            text-align: center;
            padding: 6px 0;
            font-size: 12px;
            line-height: 1.428571429;
            border-radius: 15px;
            background: #e6e6e6;
            color: #9c9c9c;
        }

        .wizard-button {
            margin: 5px;
        }

            .wizard-button.active {
                filter: brightness(0.75);
            }
        /* chanif: tolong tambahkan css dari sini sampai bawah untuk memperbaiki tampilan select2 */
        .select2-container--default .select2-selection--single {
            height: 25px;
            min-height: 25px;
        }

        .select2-container--default .select2-selection--multiple {
            min-height: 25px;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            display: none;
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            font-size: 13px;
            padding: 5px;
        }

        .select2-container--default .select2-selection--multiple .select2-selection__rendered {
            font-size: 13px;
            padding: 0 0 0 5px;
        }

        .select2-search--dropdown {
            padding: 1px;
        }

        .select2-container--default .select2-search--dropdown .select2-search__field {
            padding: 3px 5px;
        }

        .select2-results {
            font-size: 13px;
        }

        .select2-results__option {
            padding: 3px;
        }

        table.dataTable thead .sorting_asc, table.dataTable thead .sorting_desc {
            background-color: transparent
        }

        .select2-container--default .select2-search--inline .select2-search__field {
            margin-top: 0;
            padding: 0;
        }

        .select2-results__option[aria-selected=true] {
            display: none;
        }
        #generalInfo label{
            padding-right:0;
        }
    </style>
}

<div class="content content-fixed lph-form">
    <div class="container-fluid pd-x-0 pd-lg-x-10 pd-xl-x-0">
        <div class="d-sm-flex align-items-center justify-content-between mg-b-20 mg-lg-b-25 mg-xl-b-30">
            <div>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb breadcrumb-style1 mg-b-10">
                        <li class="breadcrumb-item"><a href="#">LPH Form</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Packer</li>
                    </ol>
                </nav>
                <h4 class="mg-b-0 tx-spacing--1">LPH Packer</h4>
            </div>
            <div class="d-none d-md-block">
                <button id="goPrev" class="btn btn-sm pd-x-15 btn-white btn-uppercase mg-l-5"><i data-feather="chevron-left" class="wd-10 mg-r-5"></i> Prev</button>
                @*<button class="btn btn-sm pd-x-15 btn-uppercase btn-secondary" id="btnRevert"><i class="wd-10 mg-r-5 fas fa-undo"></i> Revert</button>*@
                <button class="btn btn-sm pd-x-15 btn-primary btn-uppercase mg-l-5 button" id="btnHistory"><i data-feather="clock" class="wd-10 mg-r-5"></i> History</button>
                <button class="btn btn-sm pd-x-15 btn-white btn-uppercase" data-toggle="modal" data-target="#photo-modal"><i data-feather="camera" class="wd-10 mg-r-5"></i> Photo</button>
                <button class="btn btn-sm pd-x-15 btn-white btn-uppercase" id="btnSaveDraft"><i data-feather="save" class="wd-10 mg-r-5"></i> Save</button>
                <button class="btn btn-sm pd-x-15 btn-primary btn-uppercase" id="btnSave"><i data-feather="save" class="wd-10 mg-r-5"></i> Submit</button>
                <button class="btn btn-sm pd-x-15 btn-uppercase btn-secondary " id="btnReset"><i data-feather="refresh-cw" class="wd-10 mg-r-5"></i> Reset</button>
                <button class="btn btn-sm pd-x-15 btn-white btn-uppercase mg-l-5" onclick="javascript:window.print()"><i data-feather="printer" class="wd-10 mg-r-5"></i> Print</button>
            </div>
        </div>

        <div class="row">
            <!-- chanif: mending langsung kopi saja keseluruhan isi div di bawah ini, karena sepertinya sama semua isinya untuk semua LPH  -->
            <div class="col-12 mg-b-20">
                <div class="card collect-component" id="generalInfo">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Information</div>
                    <div class="card-body d-flex">
                        <div class="flex-1">
                            <div class="form-group row">
                                <label class="col-3 col-form-label">Date*</label>
                                <div class="col-5">
                                    <input type="text" class="form-control information-datepicker mandatory" name="DateInfo" id="txtDateInfo" value="">
                                </div>
                                <label class="col-2 col-form-label tx-right pd-r-0-f">Week*</label>
                                <div class="col-2">
                                    <input type="text" class="form-control mandatory" name="WeekNumber" id="txtWeekNumber" disabled value="">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-3 col-form-label">Machine*</label>
                                <div class="col-4">
                                    <select class="form-control mandatory select2" name="MachInfo" id="machInfo">
                                        <option value="">Select Machine</option>
                                        @foreach (Fast.Web.Models.MachineModel machine in ViewBag.Machines)
                                        {
                                            <option value="@(machine.Code)">@(machine.Code)</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-3 col-form-label">Brand*</label>
                                <div class="col-9">
                                    <select class="form-control mandatory select2" name="BrandInfo" id="brandInfo">
                                        <option value="">Select Brand</option>
                                        @foreach (Fast.Web.Models.ReferenceDetailModel brand in ViewBag.Brand)
                                        {
                                            <option value="@(brand.Code)">[@(brand.Code)] @brand.Description</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <label class="col-3 col-form-label">Prodtech*</label>
                                <div class="col-8">
                                    <select class="form-control mandatory select2" name="ProdTech" id="prodTech" multiple>
                                        @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Prodtechs)
                                        {
                                            <option value="@(employee.EmployeeID)">[@(employee.EmployeeID)] @employee.FullName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            @*<div class="form-group row">
                            <label class="col-3 col-form-label">Foreman</label>
                            <div class="col-8">
                                <select class="form-control mandatory select2" name="Foreman" id="foreman">
                                    <option value="">Select Foreman</option>
                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Foremans)
                                    {
                                        <option value="@(employee.EmployeeID)">[@(employee.EmployeeID)] @employee.FullName</option>
                                    }
                                </select>
                            </div>
                        </div>*@
                            <div class="form-group row">
                                <label class="col-3 col-form-label">Mechanic*</label>
                                <div class="col-8">
                                    <select class="form-control mandatory select2" name="Mekanik" id="mekanik">
                                        <option value="">Select Mechanic</option>
                                        @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Mechanics)
                                        {
                                            <option value="@(employee.EmployeeID)">[@(employee.EmployeeID)] @employee.FullName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <label class="col-4 col-form-label">Electrician*</label>
                                <div class="col-8">
                                    <select class="form-control mandatory select2" name="Electrician" id="elektrik" multiple>
                                        @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Electrics)
                                        {
                                            <option value="@(employee.EmployeeID)">[@(employee.EmployeeID)] @employee.FullName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-4 col-form-label">Supervisor*</label>
                                <div class="col-8">
                                    <select class="form-control mandatory select2" name="TeamLeader" id="teamLeader">
                                        <option value="">Select Mechanic</option>
                                        @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Leaders)
                                        {
                                            <option value="@(employee.EmployeeID)">[@(employee.EmployeeID)] @employee.FullName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-4 col-form-label" style="padding-right: 3px;">PO Number</label>
                                <div class="col-8">
                                    <select class="form-control select2" name="PONumber">
                                        <option value="">Select PO Number</option>
                                        @foreach (Fast.Web.Models.WppModel wpp in ViewBag.WPP)
                                        {
                                            <option value="@(wpp.PONumber)">@(wpp.PONumber)</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <label class="col-4 col-form-label">Shift / Group*</label>
                                <div class="col-3">
                                    <input type="text" class="form-control mandatory" name="Shift" id="shift" disabled value="">
                                </div>
                                <label class="col-1 col-form-label tx-center">/</label>
                                <div class="col-3">
                                    @*<input type="text" class="form-control mandatory" name="Group" id="group" value="">*@
                                    <select class="form-control select2 mandatory" name="Group" id="group">
                                        <option value="">Select Group</option>
                                        @foreach (Fast.Web.Models.ReferenceDetailModel detail in ViewBag.referenceGroup)
                                        {
                                            <option value="@(detail.Code)">@(detail.Code)</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-4 col-form-label">Start / Stop*</label>
                                <div class="col-3">
                                    <div class="input-group">
                                        <input id="inputTimeStart" name="Start" class="form-control input-time mandatory" value="">
                                    </div>
                                </div>
                                <label class="col-1 col-form-label">/</label>
                                <div class="col-3">
                                    <div class="input-group">
                                        <input id="inputTimeStop" name="Stop" class="form-control input-time mandatory" value="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!--INFORMATION-->
            <div class="col-12 mg-b-20">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">
                        Handover Logbook
                    </div>

                    @*<div class="card-body row collect-component" id="HandoverLogbook">
                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Stops</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Stops
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlnoofstops" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">MTBF</label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlmtbf" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Safety</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Safety trigger Level of risk
                            </label>
                            <div class="col-3">
                                <select class="form-control select2" name="hlsafetyTrigger">
                                    <option label="Choose one"></option>
                                    <option value="High">High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlsafetyNumber" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-7 col-form-label">Product</label>
                            <div class="col-5">
                                <select class="form-control select2 " name="hlproduct">
                                    <option label="Choose one"></option>
                                    <option label="Hold">Hold</option>
                                    <option value="Blocked">Blocked</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-7 col-form-label">Comment</label>
                            <div class="col-5">
                                <textarea type="text" name="hlsafetyComment" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col"></div>
                    <div class="col-4">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Quality</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Quality trigger Level of risk
                            </label>
                            <div class="col-3">
                                <select class="form-control select2" name="hlquality">
                                    <option label="Choose one"></option>
                                    <option value="High">High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlqualityNumber" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-7 col-form-label">Comment</label>
                            <div class="col-5">
                                <textarea type="text" name="hlqualityComment" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Centerlines</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Centerlines Checked
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlcenterlineschecked" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Centerlines Out of Limits
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlcenterlinesofl" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Ensure CL Deviation Log Completed
                            </label>
                            <div class="col-3">
                                <select class="form-control select2" name="hlensureCLDeviation">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">CIL / Planned Stop (1)  </label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of CIL's Completion %
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlcilCompletion" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Planned Stop - Planned Duration
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlplannedDuration" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Planned Stop Actual Duration
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlactualDuration" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">CIL / Planned Stop (2)  </label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of CIL's Completion %
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlcilCompletion2" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Planned Stop - Planned Duration
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlplannedDuration2" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Planned Stop Actual Duration
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlactualDuration2" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Defect handling</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Defects Found
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlnumofDefectsFound" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Defects Fixed
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlnumofDefectsFixed" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Ensure  all defects found reported in DH Log
                            </label>
                            <div class="col-3">
                                <select class="form-control select2" name="hlensureReportedDHL">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Breakdown Elimination</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Number of Breakdowns
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlnumofBreakdown" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Total Breakdown time
                            </label>
                            <div class="col-3">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hltotBreakdown" class="form-control">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-9 col-form-label">
                                Ensure PM Card(s) completed for every BD
                            </label>
                            <div class="col-3">
                                <select class="form-control select2" name="hlensurePMCard">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">Quality</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Quality Flags
                            </label>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlqualityFlags" class="form-control">
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualityFlagsAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Quality Incidents
                            </label>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" placeholder="0" name="hlqualityIncidents" class="form-control">
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualityIncidentsAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Completition of VQI & CPQI selfinspection during the shift
                            </label>
                            <div class="col-2">
                                <select class="form-control select2" name="hlqualityCompletitionofVQI">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualityCompletitionofVQIAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group row">
                            <label class="col col-form-label font-weight-bold">&nbsp;</label>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                SPC physical parameters out of control limits and/or trends breaking the SPC rule
                            </label>
                            <div class="col-2">
                                <select class="form-control select2" name="hlqualitySPC">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualitySPCAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Incomplete documentation
                            </label>
                            <div class="col-2">
                                <select class="form-control select2" name="hlqualityIncompleteDoc">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualityIncompleteDocAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">
                                Higher RR
                            </label>
                            <div class="col-2">
                                <select class="form-control select2" name="hlqualityHigherRR">
                                    <option value="NA">NA</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <input type="text" name="hlqualityHigherRRAction" class="form-control" placeholder="Mitigation/Immediate Correction Actions">
                            </div>
                        </div>
                    </div>
                </div>*@
                    <div class="card-body">
                        <div class="tableWrapper" style="max-height: 180px">
                            <table class="table table-bordered table-hover table-striped">
                                <thead class="thead-info">
                                    <tr class="tx-center">
                                        <th style="min-width:120px;">Stops and Location</th>
                                        <th style="min-width:100px;"># of Stops</th>
                                        <th style="min-width:120px;">Initial Root Cause (Describe the issue) / Action Taken &amp; Impact</th>
                                        <th style="min-width:120px;">Action Taken in your shift</th>
                                        <th width="80px">Action</th>
                                    </tr>
                                    <tr class="summary-body" style="visibility:hidden;">
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="logbook">
                                </tbody>
                                <tfoot>
                                    <tr class="input">
                                        <td><input type="text" class="form-control" name="StopAndLocation"></td>
                                        <td><input type="number" onkeypress="validateNumber(event)" placeholder="0" class="form-control" name="NOfStop"></td>
                                        <td><input type="text" class="form-control" name="InitialCause"></td>
                                        <td><input type="text" class="form-control" name="ActionTaken"></td>
                                        <td class="tx-center"><i data-target="logbook" class="fa fa-plus-circle add-to-table"></i></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="col-md-12"></div>
                        <div class="tableWrapper" style="max-height: 180px">
                            <table class="table table-bordered table-hover table-striped">
                                <thead class="thead-info">
                                    <tr class="tx-center">
                                        <th style="width:50%;">Action proposed for next shift</th>
                                        <th style="min-width:90px;">Owner</th>
                                        <th style="min-width:70px;">Start Time</th>
                                        <th style="min-width:70px;">End Time</th>
                                        <th style="min-width:60px;">Duration (Min)</th>
                                        <th style="min-width:100px;">Status</th>
                                        <th width="80px">Action</th>
                                    </tr>
                                    <tr class="summary-body">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>0</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody id="action">
                                </tbody>
                                <tfoot>
                                    <tr class="input">
                                        <td><input type="text" class="form-control" name="NextAction"></td>
                                        <td><input type="text" class="form-control" name="NextOwner"></td>
                                        <td><input type="text" class="form-control date" name="NextStart" id="start" onblur="javascript:countDuration('start','end','duration')"></td>
                                        <td><input type="text" class="form-control date" name="NextEnd" id="end" onblur="javascript:countDuration('start','end','duration')"></td>
                                        <td><input type="text" class="form-control disabled" disabled value="0" name="NextDurasi" id="duration"></td>
                                        <td>
                                            <select class="form-control select2" name="Status">
                                                <option label="Choose one"></option>
                                                <option value="ONPROGRESS">ONPROGRESS</option>
                                                <option value="DONE">DONE</option>
                                            </select>
                                        </td>
                                        <td class="tx-center"><i data-target="action" class="fa fa-plus-circle add-to-table"></i></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div> <!-- PROBLEM MESIN -->

            <div class="col-4 mg-b-20">
                <div class="card collect-component" id="productInformation">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Product Information</div>
                    <div class="card-body d-flex">
                        <div class="col-12">
                            <div class="form-group row">
                                <label class="col-6 col-form-label font-weight-bold"></label>
                                <label class="col-2 col-form-label font-weight-bold tx-center">Slof</label>
                                <label class="col-2 col-form-label font-weight-bold tx-center">TB</label>
                                <label class="col-2 col-form-label font-weight-bold tx-center">ZB</label>
                            </div>
                            <div class="form-group row">
                                <label class="col-5 col-form-label">Initial Stock <span style="font-size:10px;"><b>( a )</b></span></label>
                                <div class="col-1">
                                    <i onclick="javascript:editInitialStock()" id="iconEdit" class="fa fa-edit edit small"></i> <i onclick="javascript:disabledInitialStock()" id="iconSave" class="fa fa-save save small"></i>
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="InitialSlof" name="InitialSlof" disabled value="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="InitialTB" name="InitialTB" disabled value="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="InitialZB" name="InitialZB" disabled value="0">
                                </div>

                            </div>  <!-- initial stock -->
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Rework from Machine<span style="font-size:10px;"><b>( b )</b></span></label>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReworkMachineSlof" name="ReworkMachineSlof" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" class="form-control " value="" id="ReworkMachineTB" name="ReworkMachineTB" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReworkMachineZB" name="ReworkMachineZB" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Receive from Rework<span style="font-size:10px;"><b>( c )</b></span></label>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReceiveReworkSlof" name="ReceiveReworkSlof" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " value="" id="ReceiveReworkTB" name="ReceiveReworkTB" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReceiveReworkZB" name="ReceiveReworkZB" placeholder="0">
                                </div>
                            </div>
                            @*<div class="form-group row">
                            <label class="col-6 col-form-label">Reworked<span style="font-size:10px;"><b>( d )</b></span></label>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReworkSlof" name="ReworkSlof" placeholder="0">
                            </div>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReworkTB" name="ReworkTB" placeholder="0">
                            </div>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ReworkZB" name="ReworkZB" placeholder="0">
                            </div>
                        </div>*@
                            <div class="form-group row">
                                <label class="col-6 col-form-label">QC, Admin, Diambil Rework<span style="font-size:10px;"><b>( e )</b></span></label>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="QCSlof" name="QCSlof" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="QCTB" name="QCTB" placeholder="0">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="QCZB" name="QCZB" placeholder="0">
                                </div>
                            </div>
                            @*<div class="form-group row d-none">
                            <label class="col-6 col-form-label">Claimable<span style="font-size:10px;"><b>( f )</b></span></label>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimSlof" name="ClaimSlof" placeholder="0">
                            </div>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimTB" name="ClaimTB" placeholder="0">
                            </div>
                            <div class="col-2">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimZB" name="ClaimZB" placeholder="0">
                            </div>
                        </div>*@
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Last Stock<span style="font-size:10px;"><b>( g )*</b></span></label>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="LastStockSlof" name="LastStockSlof">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="LastStockTB" name="LastStockTB">
                                </div>
                                <div class="col-2">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="LastStockZB" name="LastStockZB">
                                </div>
                            </div> <!-- last stock -->

                            <div class="form-group row">
                                <label class="col-6 col-form-label font-weight-bold">Result<span style="font-size:10px;"><b>( h = g + e + d - c + b - a )</b></span></label>
                                <div class="col-3">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="ResultProduct" name="ResultProduct" value="0" disabled>
                                </div>
                                <label class="col-2 col-form-label">Pack</label>
                                <label class="col-12 col-form-label font-weight-bold" style="font-size:10px;">U COOL : h = g + e + (j * pack per box) - c + b - a</label>
                            </div>

                        </div>

                    </div>
                </div>
            </div> <!-- PRODUCT INFORMATION -->

            <div class="col-8 mg-b-20">
                <div class="card collect-component" id="machinePerformance">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Machine Performance</div>
                    <div class="card-body row" style="margin:0">
                        <div class="col-3">
                            <div class="form-group">
                                <label class="col-form-label font-weight-bold">&nbsp;</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Real*</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Reject</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Missed</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Nominal Speed</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Machine Efficiency</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Machine Utility</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Design Speed*</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Working Time*</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">No Demand Time</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Comment</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Qty Pack per Case</label>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label" style="padding-bottom: 2px">Uptime</label>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-group ">
                                <label class="col-form-label font-weight-bold tx-center">Packer (Pack)</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" placeholder="0" id="PackerReal" name="PackerReal">
                                </div>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" value="0" id="PackerRealPercentage" name="PackerRealPercentage" disabled>
                                </div>
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="PackerReject" name="PackerReject">
                                </div>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" value="0" id="PackerRejectPercentage" name="PackerRejectPercentage" disabled>
                                </div>
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="PackerMissed" name="PackerMissed">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="PackerMissedPercentage" name="PackerMissedPercentage" disabled>
                            </div>*@
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="PackerNominalSpeed" name="PackerNominalSpeed">
                                </div>
                                <label class="col-6 col-form-label">Pack/minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validatenumber(event)" class="form-control" placeholder="0" id="packermachineefficiency" name="packermachineefficiency">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validatenumber(event)" class="form-control mandatory" value="0" id="packermachineefficiencypercentage" name="packermachineefficiencypercentage" disabled>
                            </div>*@
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validatenumber(event)" class="form-control" placeholder="0" id="packermachineutility" name="packermachineutility">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validatenumber(event)" class="form-control mandatory" value="0" id="packermachineutilitypercentage" name="packermachineutilitypercentage" disabled>
                            </div>*@
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" placeholder="0" id="PackerMachineDesignSpeed" name="PackerMachineDesignSpeed">
                                </div>
                                <label class="col-6 col-form-label">Pack/Minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" placeholder="0" id="PackerMachineWorkingTime" name="PackerMachineWorkingTime">
                                </div>
                                <label class="col-6 col-form-label">Minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" class="form-control" id="NoDemandTimePacker" name="NoDemandTimePacker">
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <textarea type="text" class="form-control" name="CommentPacker" id="CommentPacker" style="resize:none"></textarea>
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" class="form-control" placeholder="0" id="QtyPackperCasePacker" name="QtyPackperCasePacker">
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="UptimePacker" name="UptimePacker" disabled>
                                </div>
                                <label class="col-6 col-form-label">%</label>
                            </div>
                        </div>
                        <div class="col-1"></div>
                        <div class="col-4">
                            <div class="form-group">
                                <label class="col-form-label font-weight-bold tx-center">Cellophaner</label>
                            </div>
                            <div class="form-group row">

                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerReal" name="CellophanerReal">
                                </div>
                                <div class="col-2">
                                    <span style="font-size:10px;"><b>( d )</b></span>
                                </div>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" value="0" id="CelloRealPercentage" name="CelloRealPercentage" disabled>
                                </div>
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerReject" name="CellophanerReject">
                                </div>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" value="0" id="CelloRejectPercentage" name="CelloRejectPercentage" disabled>
                                </div>
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerMissed" name="CellophanerMissed">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="CelloMissedPercentage" name="CelloMissedPercentage" disabled>
                            </div>*@
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="CellophanerNominalSpeed" name="CellophanerNominalSpeed" placeholder="0">
                                </div>
                                <label class="col-6 col-form-label">Pack/minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerMachineEfficiency" name="CellophanerMachineEfficiency">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" value="0" id="CelloMachineEfficiencyPercentage" name="CelloMachineEfficiencyPercentage" disabled>
                            </div>*@
                                <label class="col-2 col-form-label ">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerMachineUtility" name="CellophanerMachineUtility">
                                </div>
                                @*<div class="col-4 d-none">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control mandatory" id="CelloMachineUtilityPercentage" name="CelloMachineUtilityPercentage" value="0" disabled>
                            </div>*@
                                <label class="col-2 col-form-label">%</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerMachineDesignSpeed" name="CellophanerMachineDesignSpeed">
                                </div>
                                <label class="col-6 col-form-label">Pack/Minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="CellophanerMachineWorkingTime" name="CellophanerMachineWorkingTime">
                                </div>
                                <label class="col-6 col-form-label">Minutes</label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" class="form-control" id="NoDemandTimeCelo" name="NoDemandTimeCelo">
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <textarea type="text" class="form-control" name="CommentCelo" id="CommentCelo" style="resize:none"></textarea>
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" class="form-control" placeholder="0" id="QtyPackperCaseCelo" name="QtyPackperCaseCelo">
                                </div>
                                <label class="col-6 col-form-label"></label>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" placeholder="0" id="UptimeCelo" name="UptimeCelo" disabled>
                                </div>
                                <label class="col-6 col-form-label">%</label>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 mg-b-20 @(ViewBag.IsPMI == null?"d-none":(ViewBag.IsPMI?"":"d-none"))">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Bandrol Information Pack <b>PMID Only</b><button onclick="hidebandrol('bandrol-pack')" class="btn btn-xs pd-x-15 btn-white btn-uppercase" type="button" style="float:right; padding:1px 0px;" id="bandrol-pack-hide"><i class="fas fa-eye-slash"></i> Hide</button></div>
                    <div class="card-body row" style="margin:0" id="bandrol-pack">
                        <div class="col-4" style="padding-right: 15px;">
                            <div class="tableWrapper" style="max-height: 180px">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead class="thead-info">
                                        <tr>
                                            @*<th>Quantity (pcs)</th>
                                        <th>Kode</th>
                                        <th>Name</th>
                                        <th width="80px"></th>*@
                                            <th>Quantity (pcs)</th>
                                            <th>TS Code</th>
                                            <th>Received by</th>
                                            <th width="80px"></th>
                                        </tr>
                                        <tr class="summary-body">
                                            <td>0</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </thead>
                                    <tbody id="bandroltakePMID">
                                    </tbody>

                                    <tfoot>
                                        <tr class="input">
                                            <td><input type="number" onkeypress="validateNumber(event)" id="bandrolIndexPMID" class="form-control" value="" name="takePMID"></td>
                                            <td><input type="text" class="form-control" name="kodePMID" maxlength="15"></td>
                                            <td>
                                                <select class="form-control select2" name="weightTakerPMID">
                                                    <option label="Choose one"></option>
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Prodtechs)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Foremans)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Mechanics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Electrics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                </select>
                                            </td>
                                            <td class="tx-center"><i data-target="bandroltakePMID" class="fa fa-plus-circle add-to-table"></i></td>
                                        </tr>
                                    </tfoot>

                                </table>
                            </div>
                        </div>

                        <div class="col-4 collect-component" id="Openingcol1">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Opening</b></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6  col-form-label">Opening Stock TS </label>
                                <div class="col-1">
                                    <i onclick="javascript:enableEditOpening()" id="EditOpening" class="fa fa-edit edit small"></i> <i onclick="javascript:disableEditOpening()" id="SaveOpening" class="fa fa-save save small d-none"></i>
                                </div>
                                <div class="col-4">
                                    <input type="text" class="form-control" id="OpeningStockTS" name="OpeningStockTS" placeholder="0" value="" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Received</label>
                                <div class="col-4">
                                    <input type="number" class="form-control " id="BandrolWestReceived" name="BandrolWestReceived" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack in Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinMachine" name="PackinMachine" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack in Sampling Cabinet</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinSamplingCabinet" name="PackinSamplingCabinet" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="Openingcol2">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack outside Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackoutsideMachine" name="PackoutsideMachine" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP from Rework/Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPfromRework" name="WIPfromRework" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP from Manual Tax Stamp</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPfromManual" name="WIPfromManual" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Opening</b></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalOpening" name="TotalOpening" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <hr />
                        </div>
                        <div class="col-4 collect-component" id="Closingcol1">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Closing</b></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Output (case x 500) <span style="font-size:10px;"><b>(A)</b></span></label>
                                <div class="col-4">
                                    <input type="text" class="form-control" id="Outputcase" name="Outputcase" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Total TS per Case <span style="font-size:10px;"><b>(B)</b></span></label>
                                <div class="col-4">
                                    <select class="form-control " id="TotalTSperCase" name="TotalTSperCase" placeholder="0">
                                        <option value="">Choose one</option>
                                        <option value="50">50</option>
                                        <option value="500">500</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Total TS Used <span style="font-size:10px;"><b>(AxB)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalTSUsed" name="TotalTSUsed" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS (not used, returned) &#64; 500 pcs/bundle  <span style="font-size:10px;"><b>(C)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSpcsbundle" name="LeftoverTSpcsbundle" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS (not used, returned) &lt; 500 pcs <span style="font-size:10px;"><b>(D)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSpcs" name="LeftoverTSpcs" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Laftover TS in Machine/Hopper (not used, returned) &#64; pcs <span style="font-size:10px;"><b>(E)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LaftoverTSinMachine" name="LaftoverTSinMachine" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS in Bad Condition (no longer be used) <span style="font-size:10px;"><b>(X)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSinBadCondition" name="LeftoverTSinBadCondition" placeholder="0">
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="Closingcol2">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack in Machine <span style="font-size:10px;"><b>(F)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinMachineclosing" name="PackinMachineclosing" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack in Sampling Cabinet <span style="font-size:10px;"><b>(G)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinSamplingCabinetclosing" name="PackinSamplingCabinetclosing" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Pack outside Machine <span style="font-size:10px;"><b>(H)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackoutsideMachineclosing" name="PackoutsideMachineclosing" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Claimable Tax Stamp <span style="font-size:10px;"><b>(I)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimableTaxStamp" name="ClaimableTaxStamp" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Claimable Pack <span style="font-size:10px;"><b>(J)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimablePack" name="ClaimablePack" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Unclaimable SPC <span style="font-size:10px;"><b>(K)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="UnclaimableSPC" name="UnclaimableSPC" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Unclaimable Other <span style="font-size:10px;"><b>(L)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="UnclaimableOther" name="UnclaimableOther" placeholder="0">
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="Closingcol3">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">QA Sample <span style="font-size:10px;"><b>(M)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="QASample" name="QASample" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP to Rework/Machine <span style="font-size:10px;"><b>(N)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPtoRework" name="WIPtoRework" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Closing </b> <span style="font-size:10px;"><b>((AxB)+C+D+E+F+G+H+I+J+K+L+M+N-X)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalClosing" name="TotalClosing" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Loss </b> <span style="font-size:10px;"><b>(Total Closing-Total Opening)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalLoss" name="TotalLoss" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Usage </b><span style="font-size:10px;"><b>(Total Opening-(C+D+E+F+G+H+I+N))</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalUsage" name="TotalUsage" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>% Loss </b><span style="font-size:10px;"><b>(Total Loss / Usage x 100%)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LossClosing" name="LossClosing" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>RRQ </b><span style="font-size:10px;"><b>(Total Opening-Total Usage)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="RRQClosing" name="RRQClosing" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 mg-b-20 @(ViewBag.IsPMI == null?"d-none":(ViewBag.IsPMI?"":"d-none"))">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Bandrol Information Slof  <b>PMID Only</b><button onclick="hidebandrol('bandrol-slof')" class="btn btn-xs pd-x-15 btn-white btn-uppercase" type="button" style="float:right; padding:1px 0px;" id="bandrol-slof-hide"><i class="fas fa-eye-slash"></i> Hide</button></div>
                    <div class="card-body row" style="margin:0" id="bandrol-slof">
                        <div class="col-4" style="padding-right: 15px;">
                            <div class="tableWrapper" style="max-height: 180px">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead class="thead-info">
                                        <tr>
                                            <th>Quantity (pcs)</th>
                                            <th>TS Code</th>
                                            <th>Received by</th>
                                            <th width="80px"></th>
                                        </tr>
                                        <tr class="summary-body">
                                            <td>0</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </thead>
                                    <tbody id="bandroltakePMIDSlof">
                                    </tbody>

                                    <tfoot>
                                        <tr class="input">
                                            <td><input type="number" onkeypress="validateNumber(event)" id="bandrolIndexPMIDSlof" class="form-control" value="" name="takePMIDSlof"></td>
                                            <td><input type="text" class="form-control" name="kodePMIDSlof" maxlength="15"></td>
                                            <td>
                                                <select class="form-control select2" name="weightTakerPMIDSlof">
                                                    <option label="Choose one"></option>
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Prodtechs)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Foremans)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Mechanics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Electrics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                </select>
                                            </td>
                                            <td class="tx-center"><i data-target="bandroltakePMIDSlof" class="fa fa-plus-circle add-to-table"></i></td>
                                        </tr>
                                    </tfoot>

                                </table>
                            </div>
                        </div>

                        <div class="col-4 collect-component" id="AGL_openingSlof1">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Opening</b></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6  col-form-label">Opening Stock TS </label>
                                <div class="col-1">
                                    <i onclick="javascript:enableEditOpeningSlof()" id="EditOpeningSlof" class="fa fa-edit edit small"></i> <i onclick="javascript:disableEditOpeningSlof()" id="SaveOpeningSlof" class="fa fa-save save small d-none"></i>
                                </div>
                                <div class="col-4">
                                    <input type="text" class="form-control" id="OpeningStockTSSlof" name="OpeningStockTSSlof" placeholder="0" value="" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Received</label>
                                <div class="col-4">
                                    <input type="number" class="form-control " id="BandrolWestReceivedSlof" name="BandrolWestReceivedSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof in Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinMachineSlof" name="PackinMachineSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof in Sampling Cabinet</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinSamplingCabinetSlof" name="PackinSamplingCabinetSlof" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="AGL_openingSlof2">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof outside Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackoutsideMachineSlof" name="PackoutsideMachineSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP from Rework/Machine</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPfromReworkSlof" name="WIPfromReworkSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP from Manual Tax Stamp</label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPfromManualSlof" name="WIPfromManualSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Opening</b></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalOpeningSlof" name="TotalOpeningSlof" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <hr />
                        </div>
                        <div class="col-4 collect-component" id="AGL_closingSlof1">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Closing</b></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Output (case x 500) <span style="font-size:10px;"><b>(A)</b></span></label>
                                <div class="col-4">
                                    <input type="text" class="form-control" id="OutputcaseSlof" name="OutputcaseSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Total TS per Case <span style="font-size:10px;"><b>(B)</b></span></label>
                                <div class="col-4">

                                    <select class="form-control " id="TotalTSperCaseSlof" name="TotalTSperCaseSlof" placeholder="0">
                                        <option value="">Choose one</option>
                                        <option value="50">50</option>
                                        <option value="500">500</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Total TS Used <span style="font-size:10px;"><b>(AxB)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalTSUsedSlof" name="TotalTSUsedSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS (not used, returned) &#64; 500 pcs/bundle  <span style="font-size:10px;"><b>(C)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSpcsbundleSlof" name="LeftoverTSpcsbundleSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS (not used, returned) &lt; 500 pcs <span style="font-size:10px;"><b>(D)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSpcsSlof" name="LeftoverTSpcsSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Laftover TS in Machine/Hopper (not used, returned) &#64; pcs <span style="font-size:10px;"><b>(E)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LaftoverTSinMachineSlof" name="LaftoverTSinMachineSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Leftover TS in Bad Condition (no longer be used) <span style="font-size:10px;"><b>(X)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LeftoverTSinBadConditionSlof" name="LeftoverTSinBadConditionSlof" placeholder="0">
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="AGL_closingSlof2">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof in Machine <span style="font-size:10px;"><b>(F)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinMachineclosingSlof" name="PackinMachineclosingSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof in Sampling Cabinet <span style="font-size:10px;"><b>(G)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackinSamplingCabinetclosingSlof" name="PackinSamplingCabinetclosingSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Slof outside Machine <span style="font-size:10px;"><b>(H)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="PackoutsideMachineclosingSlof" name="PackoutsideMachineclosingSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Claimable Tax Stamp <span style="font-size:10px;"><b>(I)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimableTaxStampSlof" name="ClaimableTaxStampSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Claimable Slof <span style="font-size:10px;"><b>(J)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="ClaimablePackSlof" name="ClaimablePackSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Unclaimable SPC <span style="font-size:10px;"><b>(K)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="UnclaimableSPCSlof" name="UnclaimableSPCSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Unclaimable Other <span style="font-size:10px;"><b>(L)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="UnclaimableOtherSlof" name="UnclaimableOtherSlof" placeholder="0">
                                </div>
                            </div>
                        </div>
                        <div class="col-4 collect-component" id="AGL_closingSlof3">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"></label>
                                <div class="col-4">
                                    <label class="col-7  col-form-label"></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">QA Sample <span style="font-size:10px;"><b>(M)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="QASampleSlof" name="QASampleSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">WIP to Rework/Machine <span style="font-size:10px;"><b>(N)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="WIPtoReworkSlof" name="WIPtoReworkSlof" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Closing </b> <span style="font-size:10px;"><b>((AxB)+C+D+E+F+G+H+I+J+K+L+M+N-X)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalClosingSlof" name="TotalClosingSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Loss </b> <span style="font-size:10px;"><b>(Total Closing-Total Opening)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalLossSlof" name="TotalLossSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>Total Usage </b><span style="font-size:10px;"><b>(Total Opening-(C+D+E+F+G+H+I+N))</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="TotalUsageSlof" name="TotalUsageSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>% Loss </b><span style="font-size:10px;"><b>(Total Loss / Usage x 100%)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="LossClosingSlof" name="LossClosingSlof" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label"><b>RRQ </b><span style="font-size:10px;"><b>(Total Opening-Total Usage)</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="RRQClosingSlof" name="RRQClosingSlof" placeholder="0" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 mg-b-20">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Bandrol Information</div>
                    <div class="card-body row" style="margin:0">
                        <div class="col-4" style="padding-right: 15px;">
                            <div class="tableWrapper" style="max-height: 180px">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead class="thead-info">
                                        <tr>
                                            <th>Quantity (pcs)</th>
                                            <th>TS Code</th>
                                            <th>Received by</th>
                                            <th width="80px"></th>
                                        </tr>
                                        <tr class="summary-body">
                                            <td>0</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </thead>
                                    <tbody id="bandroltake">
                                    </tbody>

                                    <tfoot>
                                        <tr class="input">
                                            <td><input type="number" onkeypress="validateNumber(event)" id="bandrolIndex" class="form-control" value="" name="take"></td>
                                            <td><input type="text" class="form-control" name="kode" maxlength="15"></td>
                                            <td>
                                                <select class="form-control select2" name="weightTaker">
                                                    <option label="Choose one"></option>
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Prodtechs)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Foremans)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Mechanics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                    @foreach (Fast.Web.Models.EmployeeModel employee in ViewBag.Electrics)
                                                    {
                                                        <option value="[@(employee.EmployeeID)] @employee.FullName">[@(employee.EmployeeID)] @employee.FullName</option>
                                                    }
                                                </select>
                                            </td>
                                            <td class="tx-center"><i data-target="bandroltake" class="fa fa-plus-circle add-to-table"></i></td>
                                        </tr>
                                    </tfoot>

                                </table>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Received <span style="font-size:10px;"><b>( o )</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="BandrolAccept" placeholder="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Use <span style="font-size:10px;"><b>( p = o - q - r - s )</b></span></label>
                                <div class="col-4">
                                    @*<select class="form-control mandatory select2">
                                    <option label="Choose one"></option>
                                    <option value="Accept">Accept</option>
                                    <option value="Rejected">Rejected</option>
                                    <option value="Final">Final</option>
                                    <option value="Destroyed">Destroyed</option>
                                    <option value="Claim">Claim</option>
                                    <option value="IPC">IPC</option>
                                </select>*@
                                    <input type="text" class="form-control" id="BandrolUse" value="0" disabled>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Rejected <span style="font-size:10px;"><b>( q )</b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="BandrolRejected" name="BandrolRejected" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Final Remaining <span style="font-size:10px;"><b>( r )</b></span></label>

                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="BandrolFinal" name="BandrolFinal" placeholder="0">
                                </div>
                            </div>
                            @*<div class="form-group row">
                            <span style="font-size:10px; "><b>* ( b = a - c - d - e - f - g )</b></span>
                        </div>*@
                        </div>
                        <div class="col-4">
                            <div class="form-group row">
                                <label class="col-7  col-form-label"> +/- Lost ( <span style="font-size:10px;">Product Result <b>( h )</b></span> - <span style="font-size:10px;">Use <b>( p )</b></span> )</label>
                                <div class="col-4">
                                    <input type="text" class="form-control" id="BandrolPackUse" name="BandrolPackUse" placeholder="0" disabled value="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Destroyed <span style="font-size:10px;"><b>( s )</b></span></label>
                                <div class="col-4">
                                    <input type="number" class="form-control " id="BandrolDestroy" name="BandrolDestroy" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">Claim </label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="BandrolClaim" name="BandrolClaim" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-7  col-form-label">IPC <span style="font-size:10px;"><b></b></span></label>
                                <div class="col-4">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control " id="BandrolIPC" name="BandrolIPC" placeholder="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-8 mg-b-20">
                <div class="card collect-component" id="productionResult">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Production Result</div>
                    <div class="card-body d-flex">
                        <div class="col-4">
                            @*<div class="form-group row">
                            <label class="col-6 col-form-label">Volume</label>
                            <div class="col-6">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control" id="volume" placeholder="0">
                            </div>
                        </div>*@
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Pack<span style="font-size:10px;"><b> ( h )</b></span></label>
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="ResultPack" name="ResultPack" disabled placeholder="0" value="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Box<span style="font-size:10px;"><b>( j ) </b></span><sub>U COOL Only</sub></label>
                                <div class="col-6">
                                    <input type="number" onkeypress="validateNumber(event)" class="form-control" id="ResultBox" name="ResultBox" placeholder="0">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6 col-form-label">CRR (KG)</label>
                                <div class="col-6">
                                    <input type="number" class="form-control" value="0" id="crrkg" name="crrkg">
                                </div>
                            </div>
                            @*<div class="form-group row">
                            <label class="col-6 col-form-label">Cigarette Total Weight (g)</label>
                            <div class="col-6">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control" id="CigaretteTotalWeight" name="CigaretteTotalWeight" placeholder="0">
                            </div>
                        </div>*@
                        </div>
                        <div class="col-4">
                            @*<div class="form-group row">
                            <label class="col-6 col-form-label">Total Stick per Case (sticks)</label>
                            <div class="col-6">
                                <input type="number" onkeypress="validateNumber(event)" class="form-control" id="TotalStickperCase" name="TotalStickperCase" placeholder="0">
                            </div>
                        </div>*@
                            <div class="form-group row">
                                <label class="col-6 col-form-label">Volume (KG)</label>
                                <div class="col-6">
                                    <input type="number" class="form-control" value="0" id="volumekg" name="volumekg">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-6 col-form-label">%CRR</label>
                                <div class="col-6">
                                    <input type="text" class="form-control" value="0" id="ResultCRR" name="ResultCRR">
                                </div>
                            </div>
                            @*<div class="form-group row">
                            <label class="col-6 col-form-label">Machine <sub>PMID Only</sub></label>
                            <div class="col-6">
                                <input type="number" class="form-control" value="" id="Mesin" name="Mesin" placeholder="0">
                            </div>
                        </div>*@
                        </div>
                        @*<div class="col-4">
                        <div class="form-group row">
                            <label class="col-6 col-form-label">Manual <sub>PMID Only</sub></label>
                            <div class="col-6">
                                <input type="number" class="form-control " value="" id="Manual" name="Manual" placeholder="0">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">Remaining Bal  <sub>PMID Only</sub></label>
                            <div class="col-6">
                                <input type="number" class="form-control " value="" id="RemainingBal" name="RemainingBal" placeholder="0">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-6 col-form-label">Remaining Slof  <sub>PMID Only</sub></label>
                            <div class="col-6">
                                <input type="number" class="form-control " value="" id="RemainingSlof" name="RemainingSlof" placeholder="0">
                            </div>
                        </div>
                    </div>*@
                    </div>
                </div>
            </div>
            <div class="col-4 mg-b-20">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Take Picture for Others (e.g. CWL)</div>
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col" style="padding-top: 10px">
                                <center>
                                    <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_7" class="rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                </center>
                            </div>
                        </div>
                        <br />
                        <div class="tableWrapper" style="max-height:200px;">
                            <table class="table table-bordered table-hover table-striped">
                                <thead class="thead-info">
                                    <tr>
                                        <th>File Name </th>
                                        <th style="min-width:200px;">Name</th>
                                        <th style="min-width:130px;">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="cbw"></tbody>
                                <tfoot>
                                    <tr class="input" style="display:none;">
                                        <td><input type="text" class="form-control" name="Filename"></td>
                                        <td><input type="text" class="form-control" name="Remark"></td>
                                        <td class="tx-center"><i data-target="cbw" class="fa fa-plus-circle add-to-table"></i></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div> <!--CAPTURE BY WEBCAM-->

            <div class="col-12 mg-b-20">
                <div class="card" id="webcam-div">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Capture by Webcam*</div>
                    <div class="card-body d-flex input-img-card">
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col-12" id="image_1_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_1" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col-12" id="image_1_show">
                                </div>

                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>Splacing Reject, Innerframe, OPP</i></label>
                                        <i onclick="printImage1('image_1_show','image_1')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col" id="image_2_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_2" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col" id="image_2_show">
                                </div>

                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>Sampling Innerframe</i></label>
                                        <i onclick="printImage1('image_2_show','image_2')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col-12" id="image_3_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_3" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col-12" id="image_3_show">
                                </div>

                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>Sampling End Label Slof</i></label>
                                        <i onclick="printImage1('image_3_show','image_3')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col-12" id="image_4_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_4" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col-12" id="image_4_show">
                                </div>
                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>Sampling Alufoil</i></label>
                                        <i onclick="printImage1('image_4_show','image_4')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col-12" id="image_5_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_5" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col-12" id="image_5_show">
                                </div>
                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>CBL</i></label>
                                        <i onclick="printImage1('image_5_show','image_5')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="divider-text divider-vertical"></div>
                        <div class="flex-1">
                            <div class="form-group row">
                                <div class="col-12" id="image_6_hide">
                                    <center>
                                        <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_6" class="input-img mandatory rounded mx-auto d-block" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                    </center>
                                </div>
                                <div class="col-12" id="image_6_show">
                                </div>
                                <div class="col-12">
                                    <center>
                                        <label class="col-12 col-form-label"><i>Sampling Glue Dot Bandrol</i></label>
                                        <i onclick="printImage1('image_6_show','image_6')" class="btn-sm btn-primary fa fa-eye"></i>
                                    </center>

                                </div>
                            </div>
                        </div>
                        @*<div class="divider-text divider-vertical"></div>
                    <div class="flex-1">
                        <div class="form-group row">
                            <div class="col-12" id="image_7_hide">
                                <center>
                                    <img src="~/Content/dashforge/assets/img/upload-img-mini.png" id="image_7" class="input-img rounded mx-auto d-block " onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" alt="insert image" width="auto">
                                </center>
                            </div>
                            <div class="col-12" id="image_7_show">
                            </div>
                            <div class="col-12">
                                <center>
                                    <label class="col-12 col-form-label"><i>Others (e.g. CWL)</i></label>
                                </center>
                            </div>
                        </div>
                    </div>*@
                    </div>
                </div>
            </div>

            <div class="col-12 mg-b-20">
                <div class="card">
                    <div class="card-header bg-primary tx-white tx-center font-weight-bold">Approval</div>
                    <div class="card-body">
                        <table class="table table-bordered table-hover table-striped" id="dtApproval">
                            <thead class="thead-info">
                                <tr>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Actions</th>
                                    <th style="width:15%;">Date &amp; Time</th>
                                    <th style="width:40%;">Comment</th>
                                </tr>
                            </thead>

                        </table>
                    </div>
                </div>
            </div>


        </div><!-- row -->
    </div><!-- container -->
</div><!-- content -->






<div class="modal fade wizard-modal" id="photo-modal" role="dialog">
    <div class="modal-dialog" style="min-width:90%;height:auto;">
        <div class="modal-content">
            <div class="modal-body">
                <div class="close"><i data-dismiss="modal" class="fa fa-times"></i></div>

                <div id="carousel" class="carousel slide" data-pause="true">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <h5>Take For</h5>
                            <hr />
                            <center>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_splacing" class="wizard-button btn btn-primary">Splacing Reject, Innerframe, OPP</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_innerframe" class="wizard-button btn btn-primary">Sampling Innerframe</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_endlabel" class="wizard-button btn btn-primary">Sampling End Label Slof</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_alufoil" class="wizard-button btn btn-primary">Sampling Alufoil</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_intiket" class="wizard-button btn btn-primary">CBL</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_glue" class="wizard-button btn btn-primary">Sampling Glue Dot Bandrol</button>
                                <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="t_cwl" class="wizard-button btn btn-primary">Others (e.g. CWL)</button>
                            </center>
                        </div>

                        <div class="carousel-item">
                            <h5><label id="title"></label></h5>
                            <hr />
                            <div class="row">
                                <div class="col-md-6">
                                    <center>
                                        <select id="videoSource"><option value="" selected="selected"></option></select><br />
                                    </center>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <center>
                                        <video autoplay="true" width="500" height="300" id="videoElement"> </video><br />
                                        <button id="snapHat">Capture Image </button><br />
                                    </center>
                                </div>
                                <div class="col-md-6">
                                    <center>
                                        <canvas id="snapshot" style="max-width: 500px;max-height: 300px !important"></canvas><br />
                                        <p id="demo"></p>

                                        <button id="capture" hidden>Read PDF417</button>  @*don't remove *@
                                        <button id="capture3" hidden>OCR ID </button>  @*don't remove*@
                                        <button id="saveText" hidden>Save Text + Image </button>   @*don't remove *@
                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <h5>Name</h5>
                            <hr />
                            <center>
                                <input type="text" class="form-control" id="photo-notes">
                            </center>
                        </div>
                    </div>
                </div>

                <hr>
                <div>
                    <button onclick="javascript:wizardButtonSetSelection(this)" type="button" id="btnNextPhoto" class="btn btn-xs btn-primary next" style="float:right;display:none;">Add</button>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal fade wizard-modal" id="photo-preview" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="close"><i data-dismiss="modal" class="fa fa-times"></i></div>
                <center>
                    <img id="photo-preview-image" style="width: 75%;margin-bottom: 20px;" /><br />
                    <p id="photo-preview-name"></p>
                </center>
            </div>
        </div>
    </div>
</div>

<div id="jsonModel" data-json='@Html.Raw(JsonConvert.SerializeObject(Model))' />
@section Scripts{
    <script src="~/Content/dashforge/lib/cleave.js/cleave.min.js"></script>
    <script src="~/Content/dashforge/lib/select2/js/select2.min.js"></script>
    <script src="~/Content/dashforge/lib/moment/moment.js"></script>
    <script src="~/Scripts/webcam_help/main.js"></script>
    <script src="~/Scripts/webcam_help/MRZ_417_230119.js"></script>

    <script src="~/Content/dashforge/lib/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/Content/dashforge/lib/datatables.net-dt/js/dataTables.dataTables.min.js"></script>
    <script src="~/Content/dashforge/lib/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/Content/dashforge/lib/datatables.net-responsive-dt/js/responsive.dataTables.min.js"></script>


    <script>
        var selected = null;
        $(document).ready(function () {
            var lphID = @(Model.LPH.ID);
            $('#dtApproval').dataTable({
                "autoWidth": false,
                "processing": true,
                "serverSide": true,
                "info": false,
                "filter": false,
                "bLengthChange": false,
                "orderMulti": false,
                "pageLength": 10,
                "destroy": true,
                "order": [[3, "asc"]],
                "ajax": {
                    "url": fastApp.BaseUrl + '/Packer/GetApproverList?lphid=' + lphID,
                    "type": "POST",
                    "datatype": "json"
                },

                "columnDefs":
                    [{
                        "targets": [0],
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [1],
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [2],
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [3],
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [4],
                        "searchable": true,
                        "orderable": true
                    },
                        //{
                        //       "targets": [5],
                        //       "searchable": true,
                        //       "orderable": true
                        //   },

                    ],

                "columns": [

                    { "data": "User", "name": "User", "title": "Name", "autoWidth": false },
                    { "data": "Role", "name": "Role", "title": "Role", "autoWidth": false },
                    { "data": "Status", "name": "Status", "title": "Status", "autoWidth": false },
                    //{ "data": "Approver", "name": "Approver", "title": "Approver", "autoWidth": false },
                    {
                        "data": "ModifiedDate",
                        render: function (data, type, row) {
                            if (data)
                                return moment(data).format("DD-MMM-YY HH:mm");
                            else
                                return '';
                        }
                    },
                    { "data": "Notes", "name": "Notes", "title": "Notes", "autoWidth": false }
                ],
                "fnRowCallback": function (nRow, data, iDisplayIndex, iDisplayIndexFull) {
                    $('td', nRow).css('background-color', data['Color']);
                    $('#dtApproval_paginate')[0].style.display = "none";
                }
            });
        });
    </script>

    <script type="text/javascript">
        'use strict'
          $('#btnHistory').on('click', function (e) {
		     location.href = '@Url.Action("Index", "History")';
          });
        $('.datepicker').datepicker({
                format: 'D,d-M-yy',
                //language: 'id-id'
		});
        $('.information-datepicker').toArray().forEach(function (field) {
            $(field).datepicker({
                todayHighlight: true,
                format: 'D, dd-M-yy',
                startDate: new Date(new Date().setDate(new Date().getDate() - 2)),
                endDate: new Date(new Date().setDate(new Date().getDate() + 1)),
                //maxDate: 2,
                //minDate: -2,
            });
        });
        $('input[type=text]').on('input', function (e) {
            var val = e.currentTarget.value;
            var myRegexp = /^[a-zA-Z0-9\s\.\,\:]*/m;
            var match = myRegexp.exec(val);
            console.log(match);
            if (match == null) {
                if (e.preventDefault) e.preventDefault(); //normal browsers
                e.returnValue = false; //IE
            } else {
                if (match.join('') != val) {
                    e.currentTarget.value = e.currentTarget.value.substring(0, e.currentTarget.value.length-1);
                     e.preventDefault(); //normal browsers
                    e.returnValue = false; //IE
                }
            }
        });

        //$("#txtDateInfo").val(moment().format("dddd, DD-MMM-YY"));
        //$("#txtWeekNumber").val(moment().week());

    </script>

    <script>
        var dataBandrolProductionComponent = [
            "BandrolAccept",
            "BandrolUse",
            "BandrolRejected",
            "BandrolFinal",
            "BandrolPackUse",
            "BandrolDestroy",
            "BandrolClaim",
            "BandrolIPC",
        ];

        $(function () {
            'use strict'

            /******************** PREFILLED ******************/
            var model = JSON.parse($("#jsonModel").attr("data-json"));
            console.log(model);

            for (var i = 0; i < model.CompoVal.length; i++) {
                const tn = model.CompoVal[i].Component.ComponentName.split("-");
                const type = model.CompoVal[i].Component.ComponentType.trim();
                const parent = tn[0];
                tn.shift();
                const child = tn.join("-");
                const val = model.CompoVal[i].Value.Value;
                let node = $("#" + parent + " " + type + "[name=" + child + "]");
                var temp_val = decodeURIComponent(val ? val : "");
                $(node).val(temp_val);
                if (child == 'Group' && type == 'INPUT' && parent == 'generalInfo') {
                    node = $("#" + parent + " " + "SELECT" + "[name=" + child + "]");
                    $(node).val(temp_val);
                }
                if ($(node).hasClass("select2")) {
                    if (temp_val.indexOf('___') !== -1) {
                        temp_val = temp_val.split('___');
                        $(node).val(temp_val);
                    }
                    $(node).trigger('change');
                }
                if ($(node).data('datepicker')) {
					var date = temp_val.substr(5, 9).split("-");
					var months = moment.monthsShort();
					date[1]=months.indexOf(date[1])+1;
					if(date[1]<10){
						date[1]='0'+date[1];
					}                        
					temp_val = '20'+date[2]+'-'+date[1]+'-'+date[0];
                    $(node).datepicker('setDate', new Date(temp_val)).datepicker('fill');
                }

                for (var j = 0; j < dataBandrolProductionComponent.length; j++) {
                    if (model.CompoVal[i].Component.ComponentName == dataBandrolProductionComponent[j]) {
                        const val = model.CompoVal[i].Value.Value;
                        $('#' + dataBandrolProductionComponent[j]).val(decodeURIComponent(val == null ? "" : val));
                    }
                }

                if (model.CompoVal[i].Component.ComponentName == "Splacing Reject") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_1_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_1" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_1_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_1" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_1_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_1" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                }
                if (model.CompoVal[i].Component.ComponentName == "Sampling Innerframe") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_2_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_2" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_2_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_2" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_2_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_2" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                    document.getElementById("image_2_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_2" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                }
                if (model.CompoVal[i].Component.ComponentName == "Sampling End Label") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_3_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_3" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_3_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_3" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_3_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_3" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                    document.getElementById("image_3_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_3" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                }
                if (model.CompoVal[i].Component.ComponentName == "Sampling Alufoil") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_4_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_4" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_4_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_4" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_4_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_4" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                    document.getElementById("image_4_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_4" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                }
                if (model.CompoVal[i].Component.ComponentName == "Sampling Intiket") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_5_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_5" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_5_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_5" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_5_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_5" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                    document.getElementById("image_5_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_5" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                }
                if (model.CompoVal[i].Component.ComponentName == "Sampling Glue Dot Bandrol") {
                    if (model.CompoVal[i].Value.Value == "_no_image.png") {
                        document.getElementById("image_6_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_6" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    } else {
                        document.getElementById("image_6_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_6" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                        document.getElementById("image_6_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_6" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                    }
                    document.getElementById("image_6_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_6" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                }
                //if (model.CompoVal[i].Component.ComponentName == "OthersCWL") {
                //    if (model.CompoVal[i].Value.Value == "_no_image.png")
                //    {
                //    document.getElementById("image_7_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_7" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                //    } else {
                //        document.getElementById("image_7_show").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_7" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                //        document.getElementById("image_7_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_7" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                //    }
                //    document.getElementById("image_7_hide").innerHTML = '<img class="input-img rounded mx-auto d-block" id="image_7" src="' + fastApp.BaseUrl + '/Uploads/lph/packer/' + decodeURIComponent(model.CompoVal[i].Value.Value) + '" onclick="infoId(this)" data-toggle="modal" data-target="#photo-modal" />';
                //}
            }
            while (model.Extras.length > 0) {
                const lastIndex = model.Extras.length - 1;
                const table = model.Extras[lastIndex].HeaderName;
                const row = model.Extras[lastIndex].RowNumber;
                let data = {
                    id: uuidv4()
                };
                for (let i = lastIndex; i >= 0; i--) {
                    if (model.Extras[i].HeaderName == table && model.Extras[i].RowNumber == row) {
                        const val = model.Extras[i].Value;
                        data[model.Extras[i].FieldName] = decodeURIComponent(val ? val : "");
                        if (model.Extras.length == 1) model.Extras = [];
                        else model.Extras.splice(i, 1);
                    }
                }
                configAle[table].data.push(data);
            }
            for (let prop in configAle) {
                configAle[prop].data.reverse();
                $("#" + prop).html(generateTable(configAle[prop].data, prop));
                countSummary(prop);
                ieFix();
            }
            /****************** END PREFILLED ****************/
            basicFunction();
            getSlofToPack();
        });
        function basicFunction() {

            /*  chanif: $('.select2').start diganti jadi $('.select2').select2 */
            $('.select2').select2({
                allowClear: true,
                placeholder: 'Choose one',
                searchInputPlaceholder: 'Search options'
            });

            $('#prodTech, #elektrik').select2('destroy');
            $('#prodTech, #elektrik').select2({
                placeholder: 'Choose one or more',
                searchInputPlaceholder: 'Search options'
            });


            $(document).find('.input-time').each(function () {
                var cleave = new Cleave($(this), {
                    time: true,
                    timePattern: ['h', 'm']
                });
            })
        }
        function tableOnScroll() {
            $(this).find("tfoot tr.input").css("transform", `translateX(-${$(this).scrollLeft()}px)`);
        }
        function ieFix() {
            if (navigator.userAgent.search("Edge") >= 0) {
                $(".tableWrapper:has(tfoot)").not(".no-ie-fix").each(function () {
                    $(this).find("tfoot tr.input").css({ "position": "fixed", "bottom": "0" });
                    $(this).find("table").css({ "margin-bottom": "32px" });
                    $(this).css({ "overflow-y": "scroll" });
                    const ths = $(this).find("thead tr.summary-body").find("th, td");
                    $(this).find("tfoot tr.input td").each(function (i, td) {
                        $(td).css({ "min-width": Math.floor($($(ths)[i]).outerWidth()), "position": "static" });
                    });
                    $(this).off('scroll', tableOnScroll).on('scroll', tableOnScroll);
                });
                $('.tableWrapper thead tr').each(function () {
                    const top = $(this).position().top;
                    $(this).children().css({ "top": top });
                });
            }
        }
        function uuidv4() {
            return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
                (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));
        }

        function generateRow(data, targetTable) {
            let r = "";
            $(`#${targetTable} ~ tfoot tr.input td`).children("input, select").each(function () {
                const name = $(this).prop("name");
                r += `<td data-name="${name}">${data[name]}</td>`;
            });

            let useEdit = true;
            let useDelete = true;
            let additionalButtons = "";
            if (configAle[targetTable].rowConfig !== undefined) {
                if (configAle[targetTable].rowConfig.withEdit !== undefined)
                    useEdit = configAle[targetTable].rowConfig.withEdit;
                if (configAle[targetTable].rowConfig.withDelete !== undefined)
                    useDelete = configAle[targetTable].rowConfig.withDelete;
                if (configAle[targetTable].rowConfig.additionalButtons != undefined)
                    additionalButtons = configAle[targetTable].rowConfig.additionalButtons(data);
            }
            r += `<td class="tx-center">`;
            r += additionalButtons;
            if (useEdit) r += `<i onclick="javascript:editData(this)" data-id="${data.id}" data-target-table="${targetTable}" class="fa fa-edit edit"></i>`;
            if (useDelete) r += `<span onClick="javascript:deleteData(this)" data-id="${data.id}" data-target-table="${targetTable}"><i class="fa fa-trash"></i></span>`;
            r += `</td >`;
            return r;
        }
        function generateTable(arr, targetTable) {
            if (arr.length == 0) return "";
            let rows = "";
            for (var i = arr.length - 1; i >= 0; i--) {
                rows += '<tr>';
                rows += generateRow(arr[i], targetTable);
                rows += '</tr>';
            }
            return rows;
        }
        function findInArray(id, crr) {
            for (var i = 0; i < crr.length; i++) {
                if (crr[i].id == id) {
                    return i;
                }
            }
        }
        function deleteFromArray(id, crr) {
            crr.splice(findInArray(id, crr), 1);
            return crr;
        }
        function editData(button) {
            const table = $(button).parents("table");
            if (!$(table).data("edited")) {
                $(table).data("edited", true);

                const tds = $(button).parents("tr").children('td');
                const inputTr = $(table).find('tr.input');
                const inputTds = $(inputTr).children('td');
                const tdsCount = $(tds).length;

                $(tds).each(function (i, e) {
                    const el = $(inputTds[i]).children()[0];
                    if (i != tdsCount - 1) {
                        const html = $(e).html();
                        const newInput = $(el).clone();
                        if ($(el).hasClass('select2'))
                            $(el).val(null).trigger("change");
                        else
                            $(el).val("");
                        if (!$(el).hasClass("disabled"))
                            $(newInput).prop("disabled", false);

                        $(el).prop("disabled", true);
                        $(newInput).val(html);
                        $(e).html(newInput);
                        if ($(el).hasClass('select2')) {
                            $(newInput).select2('destroy');
                            $(newInput).removeAttr('data-select2-id');
                            $(newInput).select2({
                                allowClear: true,
                                placeholder: 'Choose one',
                                searchInputPlaceholder: 'Search options'
                            });
                        }
                    } else {
                        $(el).off("click");
                        const edit = $(e).find(".edit");
                        $(edit).attr("onclick", "javascript:normalData(this)");
                        $(edit).removeClass("fa-edit");
                        $(edit).addClass("fa-save");
                    }
                });
            }
            $('.date').toArray().forEach(function (field) {
                new Cleave(field, {
                    time: true,
                    timePattern: ['h', 'm']
                });
            });
            basicFunction();
            ieFix();
        }
        function releaseDisabledInput(table) {
            $(table).data("edited", false);
            const tds = $(table).find('tr.input td');
            const tdsCount = $(tds).length;
            $(tds).each(function (i, e) {
                const el = $(e).children()[0];
                if (i != tdsCount - 1) {
                    if (!$(el).hasClass("disabled"))
                        $(el).prop("disabled", false);
                } else {
                    var ev = $._data(el, 'events');
                    if (!(ev && ev.click))
                        $(el).on("click", addToTable);
                }
            });
        }
        function wizardButtonSetSelection(button) {
            selected = $(button).html();
            wizardButtonNext(button);
        }
        function wizardButtonNext(button) {
            const modal = $(button).parents(".modal");
            const carousel = $(modal).find('.carousel');
            const index = $(carousel).find('.carousel-item.active').index();
            const stepper = $(modal).find('.stepper');

            var info = { shouldReturn: false, shouldHide: false };
            $(modal).trigger("next", [index, info]);
            if (info.shouldReturn) return;
            if (info.shouldHide) { $(modal).modal('hide'); return; }

            $(stepper).children('.active').removeClass("active");

            $(carousel).carousel('next');
            $(stepper).children(`.stepper-step:nth-child(${index + 2})`).toggleClass("active");
            $(modal).find(".prev").show();
        };
        function generateWizardButton(arr) {
            let r = "";
            for (var i = 0; i < arr.length; i++) {
                r += `<button type="button" class="wizard-button btn btn-primary" onclick="javascript:wizardButtonSetSelection(this)">${arr[i]}</button>`;
            }
            return r;
        }
        function startupSetup(target, data) {
            $(target).html(generateTable(data, target));
            countSummary(target);
        }
        $(document).ready(function () {
            $("#iconSave").hide();
            $('.date').toArray().forEach(function (field) {
                new Cleave(field, {
                    time: true,
                    timePattern: ['h', 'm']
                });
            });
            $(".add-to-table").on("click", addToTable);
            $('.tableWrapper thead tr').each(function () {
                const top = $(this).position().top;
                $(this).children().css({ "top": top });
            });
            $(".wizard-modal .next").click(wizardButtonNext);
            $(".wizard-modal .prev").click(function () {
                const modal = $(this).parents(".modal");
                const carousel = $(modal).find('.carousel');
                const stepper = $(modal).find('.stepper');
                const index = $(carousel).find('.carousel-item.active').index();

                $(stepper).children('.active').removeClass("active");

                $(carousel).carousel('prev');
                $(stepper).children(`.stepper-step:nth-child(${index})`).toggleClass("active");
                if (index == 1) $(modal).find(".prev").hide();
            });
            $('.wizard-modal').on('hidden.bs.modal', function (e) {
                const carousel = $(this).find('.carousel');
                const stepper = $(this).find('.stepper');
                $(this).find('.active').removeClass("active");
                $(stepper).children(".stepper-step:first-child").toggleClass("active");
                $(carousel).find(".carousel-item:first-child").toggleClass("active");
                $(this).trigger("hide");
                $(this).find(".prev").hide();
            });
        });
        function addToTable(button) {
            const targetTable = $(this).data("target");
            const tds = $(this).parents("tr").children("td");
            var newdata = {
                id: uuidv4()
            };
            let shouldReturn = false;
            $(tds).each(function (tdIndex, td) {
                const input = $(td).children();
                if (input.attr("name") != undefined) {
                    const name = input.attr("name");
                    const val = input.val();
                    if (configAle[targetTable].onValidate != undefined) {
                        if (configAle[targetTable].onValidate(name, val)) {
                            shouldReturn = true;
                            if ((input[0].nodeName.toLowerCase() === 'select')) {
                                $(input[0]).siblings(".select2-container").css('border', '1px solid red');
                                $(input[0]).siblings(".select2-container").css('border-radius', '0.25rem');
                                $(input[0]).on('select2:select', function (e) {
                                    $(input[0]).siblings(".select2-container").css('border', 'none');
                                    $(input[0]).siblings(".select2-container").css('border-radius', '0');
                                });
                            } else if (input[0].value === "") {
                                input[0].style.borderColor = "red";
                                $(input[0]).on('click', function (e) {
                                    input[0].style.borderColor = "rgb(192, 204, 218)";
                                });
                            }
                            return false;
                        }
                    }
                    if (input[0].type.toLowerCase() == "number") {
                        var myRegexp = /^00+$/g;
                        var match = myRegexp.exec(val);
                        if (match != null) {
                            alert("Please input a valid number");
                            shouldReturn = true;
                            return false;
                        }
                    }
                    newdata[name] = val;
                }
            });
            if (shouldReturn) return;
            $(tds).each(function (i, td) {
                const node = $(td).children();
                $(node).val("");
                if ($(node).hasClass("select2"))
                    $(node).trigger('change');
            });

            if (configAle[targetTable].onAdd != undefined) {
                if (configAle[targetTable].onAdd(newdata)) {
                    return;
                }
            }
            configAle[targetTable].data.push(newdata);
            $("#" + targetTable).html(generateTable(configAle[targetTable].data, targetTable));
            countSummary(targetTable);
            ieFix();
        }
        function countSummary(targetTable) {
            if (configAle[targetTable].countSummary != undefined) {
                const rowData = configAle[targetTable].countSummary();
                const summaryTds = $('#' + targetTable).parents('table').find('.summary-body').children();
                $('#' + targetTable).parents('table').find('.input td').each(function (i, td) {
                    const name = $(td).children().attr("name");
                    if (rowData.hasOwnProperty(name))
                        $(summaryTds[i]).html(rowData[name]);
                });
            }
        }
        function deleteData(button) {
            if (confirm("Are you sure?")) {
                const id = $(button).data("id");
                const targetTable = $(button).data("target-table");
                const table = $(button).parents("table");
                releaseDisabledInput(table);
                if (configAle[targetTable].onDelete != undefined) {
                    if (configAle[targetTable].onDelete(id)) {
                        return;
                    }
                }
                deleteFromArray(id, configAle[targetTable].data);
                $('#' + targetTable).html(generateTable(configAle[targetTable].data, targetTable));
                countSummary(targetTable);
                ieFix();
            }
        }
        function normalData(button) {
            if (confirm("Are you sure?")) {
                const id = $(button).data("id");
                const targetTable = $(button).data("target-table");
                const tds = $(button).parents("tr").children('td');
                const tdsCount = $(tds).length;
                const table = $(button).parents("table");

                if (configAle[targetTable].onSave != undefined) {
                    if (configAle[targetTable].onSave(id)) {
                        return;
                    }
                }
                const index = findInArray(id, configAle[targetTable].data);
                let shouldReturn = false;
                var newdata = {
                    id: uuidv4()
                };
                $(tds).each(function (tdIndex, e) {
                    if (tdIndex != tdsCount - 1) {
                        const name = $(e).data("name");
                        const val = $($(e).children()[0]).val();
                        if (configAle[targetTable].onValidate != undefined) {
                            if (configAle[targetTable].onValidate(name, val)) {
                                shouldReturn = true;
                                return false;
                            }
                        }
                        newdata[name] = val;
                    } else {
                        const edit = $(e).find(".edit");
                        $(edit).attr("onclick", "javascript:editData(this)");
                        $(edit).removeClass("fa-save");
                        $(edit).addClass("fa-edit");
                    }
                });
                if (shouldReturn) return;

                configAle[targetTable].data[index] = newdata;
                const row = generateRow(configAle[targetTable].data[index], targetTable);
                $(button).parents("tr").html(row);

                releaseDisabledInput(table);
                countSummary(targetTable);
                ieFix();
            }
        }
        function collectAllComponent() {
            let components = [];
            let values = [];
            $('.collect-component').each(function (i, p) {
                const id = $(p).prop("id");
                $(this).find('input, select, textarea').each(function (i2, e) {
                    components.push({
                        ComponentType: $(e).prop('nodeName'),
                        ComponentName: id + "-" + $(e).prop('name'),
                    })

                    var tem_value = $(e).val();
                    if (Array.isArray(tem_value)) {
                        tem_value = tem_value.join('___');
                    }

                    values.push({
                        Value: tem_value,
                        ValueType: $(e).attr('type') == "number" ? "Numeric" : "NonNumeric",
                    });
                });
            });
            console.log(components, values);
            return [components, values];
        }
        function collectAllData() {
            let collectorArray = [];
            for (var tableId in configAle) {
                let tableColumnType = {};
                $(`#${tableId} ~ tfoot tr.input td input`).each(function () {
                    tableColumnType[$(this).prop("name")] = $(this).prop("type");
                });
                const data = configAle[tableId].data;
                for (let i = 0; i < data.length; i++) {
                    if (configAle[tableId].onCollectDataRow != undefined) {
                        data[i] = configAle[tableId].onCollectDataRow(data[i]);
                    }
                    for (var prop in data[i]) {
                        if (Object.prototype.hasOwnProperty.call(data[i], prop)) {
                            if (prop == "id") continue;
                            let newInsertData = {
                                HeaderName: tableId,
                                FieldName: prop,
                                Value: data[i][prop],
                                ValueType: tableColumnType[prop] == "number" ? "Numeric" : "NonNumeric",
                                RowNumber: i
                            };
                            if (configAle[tableId].onCollectDataSingle != undefined) {
                                newInsertData = configAle[tableId].onCollectDataSingle(newInsertData);
                            }
                            collectorArray.push(newInsertData);
                        }
                    }
                }
            }
            console.log(collectorArray);
            return collectorArray;
        }
        function countDuration(start, end, duration) {
            var end = $('#' + end).val();
            var start = $('#' + start).val();

            if (start != "" && end != "") {
                end = end.split(':');
                start = start.split(':');
                var d = new Date();
                var startdate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), start[0], start[1]);
                var enddate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), end[0], end[1]);

                if (startdate > enddate) {
                    enddate = new Date(enddate);
                    enddate.setDate(enddate.getDate() + 1);
                }

                var diffTime = enddate - startdate;
                var diffMinutes = Math.ceil(diffTime / 60000);
                if (diffMinutes == NaN) {
                    $('#' + duration).val(0);
                } else {
                    $('#' + duration).val(diffMinutes);
                }
            }
        };
    </script>
    <script>
        /*
             * name = id dari tbody;
             * data = array untuk menyimpan data;
             * countSummary = dipanggil saat menghitung summary, return object dengan property sesuai dengan name pada `tfoot tr.input`;
             * onAdd(newData) = dipanggil sebelum menambah data, return boolean apakah harus ditambahkan atau tidak;
             * onDelete(idOfDeletedObject) = dipanggil sebelum menghapus data, return boolean apakah harus dihapus atau tidak;
             * onSave(idOfUpdatedObject) = dipanggil sebelum mengubah data, return boolean apakah harus diubah atau tidak;
             * onValidate(nameOfInput, valueOfInput) = validasi nilai saat tambah dan save, return boolean apakah harus diterus atau tidak;
             *
             * rowConfig = config untuk generate baris tabel;
             * - withEdit = menampilkan edit, default true;
             * - withDelete = menampilkan delete, default true;
             * - additionalButtons(data) = fungsi untuk yang akan mengembalikan button tambahan untuk tiap baris, return element html dalam string;
             */

        var bandrolData = [];
        var bandroltakePMIDData = [];
        var logbookData = [];
        var actionData = [];
        var cbwData = [];
        var bandroltakePMIDSlofData = [];
        const configAle = {
            cbw: {
                data: cbwData,
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
                onDelete(id) {
                    for (let j = 0; j < cbwData.length; j++) {
                        if (cbwData[j].id == id) {
                            for (let i = 0; i < imgContent.length; i++) {
                                if (imgContent[i].name == cbwData[j].Filename) {
                                    imgContent.splice(i, 1);
                                    return false;
                                }
                            }
                        }
                    }
                },
                onCollectDataSingle(data) {
                    if (data.FieldName == "Filename") {
                        data.ValueType = "ImageURL/" + data.Value + "/" + "Old";
                        for (let i = 0; i < imgContent.length; i++) {
                            if (imgContent[i].name == data.Value) {
                                data.ValueType = "ImageURL/" + data.Value + "/" + "New";
                                data.Value = imgContent[i].data;
                                break;
                            }
                        }
                    }
                    return data;
                },
                rowConfig: {
                    withEdit: false,
                    additionalButtons(data) {
                        return `
                        <i data-toggle="modal" data-target="#photo-preview" onclick="javascript:setPreview('${data.Filename}')" class="fa fa-image"></i>
                        <i data-toggle="modal" data-target="#photo-modal" onclick="javascript:setEditName('${data.Filename}')" class="fa fa-camera"></i>
                                            `;
                    }
                },
            },
            bandroltakePMID: {
                data: bandroltakePMIDData,
                countSummary: function () {
                    let rowData = {};
                    let take = 0;

                    for (var i = 0; i < bandroltakePMIDData.length; i++) {
                        take += parseInt(bandroltakePMIDData[i].takePMID);
                    }
                    rowData.takePMID = take;

                    $('#BandrolWestReceived').val(rowData.takePMID);
                    countTotal();
                    return rowData;
                },
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
            },
            bandroltake: {
                data: bandrolData,
                countSummary: function () {
                    let rowData = {};
                    let take = 0;
                    let weight = 0;
                    for (var i = 0; i < bandrolData.length; i++) {
                        weight += parseInt(bandrolData[i].weight);
                    }
                    for (var i = 0; i < bandrolData.length; i++) {
                        take += parseInt(bandrolData[i].take);
                    }
                    rowData.take = take;
                    rowData.weight = weight;//+ " pcs";

                    $('#BandrolAccept').val(rowData.take);
                    countUse();
                    return rowData;
                },
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
            },
            bandroltakePMIDSlof: {
                data: bandroltakePMIDSlofData,
                countSummary: function () {
                    let rowData = {};
                    let take = 0;

                    for (var i = 0; i < bandroltakePMIDSlofData.length; i++) {
                        take += parseInt(bandroltakePMIDSlofData[i].takePMIDSlof);
                    }
                    rowData.takePMIDSlof = take;

                    $('#BandrolWestReceivedSlof').val(rowData.takePMIDSlof);
                    countTotalSlof();
                    return rowData;
                },
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
            },
            logbook: {
                data: logbookData,
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
                onAdd: function (newData) {
                    console.log(newData);
                },
            },
            action: {
                data: actionData,
                onValidate(name, val) {
                    if (val == "") {
                        alert("Value can't be empty");
                        return true;
                    }
                    return false;
                },
                countSummary: function () {
                    let rowData = {};
                    let NextDurasi = 0;
                    for (var i = 0; i < actionData.length; i++) {
                        NextDurasi += parseInt(actionData[i].NextDurasi);
                    }
                    rowData.NextDurasi = NextDurasi;
                    return rowData;
                },
                onAdd: function (newData) {
                    console.log(newData);
                },
            },
        }

    </script>
    <script>

            var collectorComponent = [];
            var collectorValue = [];

           // Part Collect Component

            function collectBandrolInfoComponent() {

                var acceptBandrol = {};
                acceptBandrol.ComponentType="textfield";
                acceptBandrol.ComponentName = "BandrolAccept";
                collectorComponent.push(acceptBandrol);

                var useBandrol = {};
                useBandrol.ComponentType="textfield";
                useBandrol.ComponentName = "BandrolUse";
                collectorComponent.push(useBandrol);

                var rejectBandrol = {};
                rejectBandrol.ComponentType="textfield";
                rejectBandrol.ComponentName = "BandrolRejected";
                collectorComponent.push(rejectBandrol);

                var finalBandrol = {};
                finalBandrol.ComponentType="textfield";
                finalBandrol.ComponentName = "BandrolFinal";
                collectorComponent.push(finalBandrol);
                //------
                 var packUseBandrol = {};
                packUseBandrol.ComponentType="textfield";
                packUseBandrol.ComponentName = "BandrolPackUse";
                collectorComponent.push(packUseBandrol);

                var destroyBandrol = {};
                destroyBandrol.ComponentType="textfield";
                destroyBandrol.ComponentName = "BandrolDestroy";
                collectorComponent.push(destroyBandrol);

                var claimBandrol = {};
                claimBandrol.ComponentType="textfield";
                claimBandrol.ComponentName = "BandrolClaim";
                collectorComponent.push(claimBandrol);

                var ipcBandrol = {};
                ipcBandrol.ComponentType="textfield";
                ipcBandrol.ComponentName = "BandrolIPC";
                collectorComponent.push(ipcBandrol);

            }
            function collectImageComponent() {

                var imageUrl1 = {};
                imageUrl1.ComponentType="Image";
                imageUrl1.ComponentName = "Splacing Reject";
                imageUrl1.OrderNum = 1;
                collectorComponent.push(imageUrl1);

                var imageUrl2 = {};
                imageUrl2.ComponentType="Image";
                imageUrl2.ComponentName = "Sampling Innerframe";
                imageUrl2.OrderNum = 2;
                collectorComponent.push(imageUrl2);

                var imageUrl3 = {};
                imageUrl3.ComponentType="Image";
                imageUrl3.ComponentName = "Sampling End Label";
                imageUrl3.OrderNum = 3;
                collectorComponent.push(imageUrl3);

                var imageUrl4 = {};
                imageUrl4.ComponentType="Image";
                imageUrl4.ComponentName = "Sampling Alufoil";
                imageUrl4.OrderNum = 4;
                collectorComponent.push(imageUrl4);

                var imageUrl5 = {};
                imageUrl5.ComponentType="Image";
                imageUrl5.ComponentName = "Sampling Intiket";
                imageUrl5.OrderNum = 5;
                collectorComponent.push(imageUrl5);

                var imageUrl6 = {};
                imageUrl6.ComponentType="Image";
                imageUrl6.ComponentName = "Sampling Glue Dot Bandrol";
                imageUrl6.OrderNum = 6;
                collectorComponent.push(imageUrl6);

                //var imageUrl7 = {};
                //imageUrl7.ComponentType="Image";
                //imageUrl7.ComponentName = "OthersCWL";
                //imageUrl7.OrderNum = 7;
                //collectorComponent.push(imageUrl7);
             }

            function collectBandrolInfoValue() {

                var acceptBandrolValue = {};
                acceptBandrolValue.Value=$('#BandrolAccept').val();
                acceptBandrolValue.ValueType = "Numeric";
                collectorValue.push(acceptBandrolValue);

                var useBandrolValue = {};
                useBandrolValue.Value=$('#BandrolUse').val();
                useBandrolValue.ValueType = "Numeric";
                collectorValue.push(useBandrolValue);

                var rejectBandrolValue = {};
                rejectBandrolValue.Value=$('#BandrolRejected').val();
                rejectBandrolValue.ValueType = "Numeric";
                collectorValue.push(rejectBandrolValue);

                var finalBandrolValue = {};
                finalBandrolValue.Value=$('#BandrolFinal').val();
                finalBandrolValue.ValueType = "Numeric";
                collectorValue.push(finalBandrolValue);
                //------
                 var packUseBandrolValue = {};
                packUseBandrolValue.Value=$('#BandrolPackUse').val();
                packUseBandrolValue.ValueType ="Numeric";
                collectorValue.push(packUseBandrolValue);

                var destroyBandrolValue = {};
                destroyBandrolValue.Value=$('#BandrolDestroy').val();
                destroyBandrolValue.ValueType = "Numeric";
                collectorValue.push(destroyBandrolValue);

                var claimBandrolValue = {};
                claimBandrolValue.Value=$('#BandrolClaim').val();
                claimBandrolValue.ValueType ="Numeric";
                collectorValue.push(claimBandrolValue);

               var ipcBandrolValue = {};
               ipcBandrolValue.Value =$('#BandrolIPC').val();
                ipcBandrolValue.ValueType = "Numeric";
                collectorValue.push(ipcBandrolValue);

            }
            function collectImageValue() {
                var imageUrl1 = $("#image_1_show").find('#image_1').first().attr('src');
                var imageUrl2 = $("#image_2_show").find('#image_2').first().attr('src');
                var imageUrl3 = $("#image_3_show").find('#image_3').first().attr('src');
                var imageUrl4 = $("#image_4_show").find('#image_4').first().attr('src');
                var imageUrl5 = $("#image_5_show").find('#image_5').first().attr('src');
                var imageUrl6 = $("#image_6_show").find('#image_6').first().attr('src');
                //var imageUrl7 = $("#image_7_show").find('#image_7').first().attr('src');

                var imageVal1 = {};
                imageVal1.Value = imageUrl1;
                imageVal1.ValueType = "ImageURL";
                collectorValue.push(imageVal1);

                var imageVal2 = {};
                imageVal2.Value = imageUrl2;
                imageVal2.ValueType = "ImageURL";
                collectorValue.push(imageVal2);

                var imageVal3 = {};
                imageVal3.Value = imageUrl3;
                imageVal3.ValueType = "ImageURL";
                collectorValue.push(imageVal3);

                var imageVal4 = {};
                imageVal4.Value = imageUrl4;
                imageVal4.ValueType = "ImageURL";
                collectorValue.push(imageVal4);

                var imageVal5 = {};
                imageVal5.Value = imageUrl5;
                imageVal5.ValueType = "ImageURL";
                collectorValue.push(imageVal5);

                var imageVal6 = {};
                imageVal6.Value = imageUrl6;
                imageVal6.ValueType = "ImageURL";
                collectorValue.push(imageVal6);

                //var imageVal7 = {};
                //imageVal7.Value = imageUrl7;
                //imageVal7.ValueType = "ImageURL";
                //collectorValue.push(imageVal7);
            }

			$('#goPrev').click(function () {
                $.ajax({
                  type: "POST",
                  url: "@Url.Action("CheckPrev", "Packer")",
                  data: JSON.stringify({
                      LPHID: @(Model.LPH.ID),
                      machine: $('#machInfo').val()
                  }),
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  success: function (result) {
					if (result.Status) {
						//ketika data ada, munculkan dalam window baru
                        window.open("@(Url.Action("Submitted", "Packer"))?lphid="+result.LPHID+"&type=1", "window baru", "height=400,width=1300");
					}
					else {
						var notice = new PNotify({
							title: "@UIResources.ErrorMessage",
							text: "No previous submissions found",
							width: "400px",
                            type: 'error',
                            addclass: 'stack-bottomright',
							hide: false,
							buttons: {
								sticker: false
							}
						});

						notice.get().click(function () {
								notice.remove();
							});
						}
                    }
                });
            })

        var statusScroll = true;
            function checkMandatory() {
                var mandatory = $(".mandatory");
                const headerHeight = $(".navbar.navbar-header.navbar-header-fixed").outerHeight();
                var status = true;
                for (var i = 0; i < mandatory.length; i++) {
                    if (($(mandatory[i])[0].nodeName.toLowerCase() === 'select') && $(mandatory[i])[0].value === "") {
                        if (statusScroll == true) {
                            window.scrollTo(0, Math.max(0, $(mandatory[i]).offset().top - headerHeight- 100));
                            statusScroll = false;
                        }
                        $(mandatory[i]).siblings(".select2-container").css('border', '1px solid red');
                        $(mandatory[i]).siblings(".select2-container").css('border-radius', '0.25rem');
                        $(mandatory[i]).parent().prepend($('<span>', {
                            style: "color:red; display:block; float:left;",
                            id: "mandatory-error-" + i,
                            html: '!',
                            class: 'row'
                        }));
                        $(mandatory[i]).on('select2:select', function (e) {
                            $(e.target).siblings(".select2-container").css('border', 'none');
                            $(e.target).siblings(".select2-container").css('border-radius', '0');
                            $(e.target).parent().find('span.row').remove();
                        });
                        status = false;
                    } else if ($(mandatory[i])[0].value === "") {
                        if (statusScroll == true) {
                            window.scrollTo(0, Math.max(0, $(mandatory[i]).offset().top - headerHeight- 100));
                            statusScroll = false;
                        }
                        $(mandatory[i])[0].style.borderColor = "red";
                        $(mandatory[i]).parent().prepend($('<span>', {
                            style: "color:red; display:block; float:left;",
                            id: "mandatory-error-" + i,
                            html: '!',
                            class: 'row'
                        }));
                        $(mandatory[i]).on('click', function (e) {
                            e.target.style.borderColor = "rgb(192, 204, 218)";
                            $(e.target).parent().find('span.row').remove();
                        });
                        $(mandatory[i]).on('focus', function (e) {
                            e.target.style.borderColor = "rgb(192, 204, 218)";
                            $(e.target).parent().find('span.row').remove();
                        });
                        status = false;
                    }
                }
                return status;
            }

            function checkPhotoMandatory() {
                for (var i = 1; i < 12; i++) {
                    var imageUrl = $("#image_" + i + "_show").find('#image_' + i).first().attr('src');
                    if (imageUrl != null && imageUrl !== "") {
                        console.log("i="+i);
                        return true;
                    }
                }
                $('#webcam-error-submit').remove();
                $('#webcam-div').append($('<div>', {
                    style: "color:red; display:block; float:left; text-align:center;",
                    id: "webcam-error-submit",
                    html: 'Please insert at least one photo',
                    class: 'row card-body'
                }));
                const headerHeight = $(".navbar.navbar-header.navbar-header-fixed").outerHeight();
                if (statusScroll == true) {
                    window.scrollTo(0, Math.max(0, $('#webcam-div').offset().top - headerHeight - 100));
                    statusScroll = false;
                }
                return false;
            }

        function saveLPH(isSubmit, Special) {
            var collectorArray = collectAllData();
            var collector = collectAllComponent();
            collectorComponent = collector[0];
            collectorValue = collector[1];
            var collectorApproval = [];

            collectBandrolInfoComponent();
            collectImageComponent();

            collectBandrolInfoValue();
            collectImageValue();

            $.ajax({
                type: "POST",
                url: "@Url.Action("Edit", "Packer")",
                data: JSON.stringify({
                    id: @(Model.LPH.ID),
                    isSubmit: isSubmit,
                    Special: Special,
                    detailExtras: collectorArray,
                    detailComponent: collectorComponent,
                    detailValue: collectorValue
                }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    console.log(result.Status);
                    if (result.Status == 'True') {
                        if (isSubmit == 1) {
                            var notice = new PNotify({
						        title: "@UIResources.Confirmation",
						        text: "@UIResources.EditSucceed",
						        width: "400px",
						        type: 'success',
						        addclass: 'stack-bottomright'
					        });

					        notice.get().click(function () {
						        notice.remove();
                            });

                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        }
                        else {
                            var notice = new PNotify({
							    title: "@UIResources.Confirmation",
							    text: "@UIResources.EditSucceed",
							    width: "400px",
							    type: 'success',
							    addclass: 'stack-bottomright'
						    });

                            setTimeout(function(){
                                notice.remove();
                            }, 3000);

                            if (counterSaveImage == -1 || counterImageComponent >= 3) {

                                window.location.reload(true);
                            }
                        }
				    }
                    else {

                        if (result.Msg == 'Invalid')
                            alert("Tab is expired, another tab with same LPHID has been opened. You cannot save until you reload page first to continue");

					    var notice = new PNotify({
						    title: "@UIResources.ErrorMessage",
						    text: "@UIResources.EditFailed",
						    width: "400px",
                            type: 'error',
                            addclass: 'stack-bottomright',
						    hide: false,
						    buttons: {
							    sticker: false
						    }
					    });

					    notice.get().click(function () {
							notice.remove();
						});
					}
                },
                      error: function (request, status, error) {
                            window.location.reload(true);
                      },
                        complete: function() {
                            $('#loading_overlay').addClass('d-none');
                        },

            });
        }

        $(window).load(function(){
            setInterval(function () {
                $('#loading_overlay').removeClass('d-none');
                saveLPH(0,@myspecial);
            }, 10 * 60 * 1000);
        });

        $('#btnSaveDraft').click(function (e) {
            $('#loading_overlay').removeClass('d-none');
            saveLPH(0,@myspecial);
            //checkPhotoMandatory();
        });

        $('#btnSave').click(function (e) {
            statusScroll = true;
            var checkM = checkMandatory();
            var checkP = checkPhotoMandatory();

            if (checkP && checkM) {
                $('#loading_overlay').removeClass('d-none');
                saveLPH(1,@myspecial);
            }else {
                var notice = new PNotify({
						title: "Warning",
						text: "Submit failed, input field with red border, and photo can't be empty",
						width: "400px",
                        type: 'error',
                        addclass: 'stack-bottomright',
						hide: false,
						buttons: {
							sticker: false
						}
                });
                setTimeout(function(){
                        notice.remove();
                }, 8000);
            }

        });

        @*$('#btnRevert').click(function () {
            var redirect = confirm("All unsubmitted changes will be lost and all values will be replaced with the last saved data. Do you really want to revert?");
            if (redirect) {
                window.location.href = "@(Url.Action("Edit", "Packer"))/?lphid=@(Model.LPH.ID)&revert=true";
            }
        });*@

        $('#btnReset').click(function () {
            var redirect = confirm("All unsubmitted changes will be lost. Do you really want to reset?");
            if (redirect) {
                @*window.location.href = "@(Url.Action("Index", "Packer"))/?reset=true";*@
                    DeleteLPH(@(Model.LPH.ID));
                }
            });


            function DeleteLPH(Id) {
                $('#loading_overlay').removeClass('d-none');
                $.ajax({
                    url: fastApp.BaseUrl + '/History/Delete?lphid=' + Id,
                    type: 'POST',
                    success: function (result) {
                        if (result.Status) {
                            var notice = new PNotify({
                            title: "@UIResources.Confirmation",
                            text: 'Reset LPH Successfully',
                            width: "400px",
                            type: 'success',
                            addclass: 'stack-bottomright'
                            });

                            notice.get().click(function () {
                                notice.remove();
                            });
                        }
                        else {
                            var notice = new PNotify({
                                title: "@UIResources.ErrorMessage",
                                text: "@UIResources.DeleteFailed",
                                width: "400px",
                                type: 'error',
                                hide: false,
                                addclass: 'stack-bottomright',
                                buttons: {
                                    sticker: false
                                }
                            });

                            notice.get().click(function () {
                                notice.remove();
                            });
                        }
                        $('#loading_overlay').addClass('d-none');
                    },
                    complete: function (data) {
                        $('#loading_overlay').addClass('d-none');
                        setTimeout(function () {
                            window.location.href = "@(Url.Action("Index", "Packer"))";
                        }, 1000);
                    }
                });
            }
    </script>



    <script>

        var isUrlLink = null;
        @*var img1Content, img2Content, img3Content = "";*@
        @*var isImg1, isImg2, isImg3 = false;*@
      //  var isImg = [];@*[false,false,false];*@
       // var imgContent = []; @*["","",""];*@
        var img1Content, img2Content, img3Content,img4Content, img5Content, img6Content, img7Content = "";
        var isImg1, isImg2, isImg3, isImg4, isImg5, isImg6, isImg7 = false;

        var imageIndex = 0;
        var max = 6;


        var selected = null;


        function defaultDisplay() {
            //for (var i = 0; i < max; i++) {
            //    $("#image_"+(i+1)+"_show").hide();
            //    $("#image_"+(i+1)+"_hide").show();
            //}
            $("#image_1_show").hide();
            $("#image_1_hide").show();

            $("#image_2_show").hide();
            $("#image_2_hide").show();

            $("#image_3_show").hide();
            $("#image_3_hide").show();

            $("#image_4_show").hide();
            $("#image_4_hide").show();

            $("#image_5_show").hide();
            $("#image_5_hide").show();

            $("#image_6_show").hide();
            $("#image_6_hide").show();

            //$("#image_7_show").hide();
            //$("#image_7_hide").show();
        }

        function switchDisplay() {
            //for (var i = 0; i < max; i++) {
            //    if (isImg[i] == true) {
            //        $("#image_"+(i+1)+"_show").show();
            //        $("#image_"+(i+1)+"_hide").hide();
            //    }
            //}
            if (isImg1 == true) {
                $("#image_1_show").show();
                $("#image_1_hide").hide();
            }
            if (isImg2 == true) {
                $("#image_2_show").show();
                $("#image_2_hide").hide();
            }
            if (isImg3 == true) {
                $("#image_3_show").show();
                $("#image_3_hide").hide();
            }
            if (isImg4 == true) {
                $("#image_4_show").show();
                $("#image_4_hide").hide();
            }
            if (isImg5 == true) {
                $("#image_5_show").show();
                $("#image_5_hide").hide();
            }
            if (isImg6 == true) {
                $("#image_6_show").show();
                $("#image_6_hide").hide();
            }
            //if (isImg7 == true) {
            //    $("#image_7_show").show();
            //    $("#image_7_hide").hide();
            //}
        }


        function infoId(e) {
            showhidecanvas(true);
            $('#webcam-error-submit').remove();
                  if (e.id == "image_1") {
                      $("#t_splacing").click();
                      isImg1 = true;
                      isImg2 = false;
                      isImg3 = false;
                      isImg4 = false;
                      isImg5 = false;
                      isImg6 = false;
                      isImg7 = false;
                  } else if (e.id == "image_2") {
                      $("#t_innerframe").click();
                      isImg2 = true;

                      isImg1 = false;
                      isImg3 = false;
                      isImg4 = false;
                      isImg5 = false;
                      isImg6 = false;
                      isImg7 = false;
                  } else if (e.id == "image_3") {
                      $("#t_endlabel").click();
                      isImg3 = true;

                      isImg2 = false;
                      isImg1 = false;
                      isImg4 = false;
                      isImg5 = false;
                      isImg6 = false;
                      isImg7 = false;
                  } else if (e.id == "image_4") {
                      $("#t_alufoil").click();
                      isImg4 = true;

                      isImg2 = false;
                      isImg3 = false;
                      isImg1 = false;
                      isImg5 = false;
                      isImg6 = false;
                      isImg7 = false;
                  } else if (e.id == "image_5") {
                      $("#t_intiket").click();
                      isImg5 = true;

                      isImg2 = false;
                      isImg3 = false;
                      isImg4 = false;
                      isImg1 = false;
                      isImg6 = false;
                      isImg7 = false;
                  } else if (e.id == "image_6") {
                      $("#t_glue").click();
                      isImg6 = true;

                      isImg2 = false;
                      isImg3 = false;
                      isImg4 = false;
                      isImg1 = false;
                      isImg5 = false;
                      isImg7 = false;
                  } else if (e.id == "image_7") {
                      $("#t_cwl").click();
                      isImg7 = true;

                      isImg2 = false;
                      isImg3 = false;
                      isImg4 = false;
                      isImg1 = false;
                      isImg5 = false;
                      isImg6 = false;
                  }
            //for (var i = 0; i < max; i++) {
            //    if (e.id == "image_"+(i+1)+"") {
            //        isImg[i] = true;
            //    }else{
            //        isImg[i] = false;
            //    }
            //}

        }
        var imgContent = [];
        var newImage = null;
        function renderImage(link, state) {

            if (link == null || link == "") {
                isUrlLink = false;
            }
            else {

                isUrlLink = true;
                console.log("link " + link);
                console.log("state: " + state);

                //for (var i = 0; i < max; i++) {
                //    if (state == "image_'"+(i+1)+"'") {
                //        imgContent[i] = link;
                //        document.getElementById("image_'"+(i+1)+"'_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + imgContent[i] + ' id="image_'+(i+1)+'"  width="160px" data-toggle="modal" data-target="#photo-modal" />';
                //    }
                //}
                if (state == "image_1") {
                    img1Content = link;
                    document.getElementById("image_1_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img1Content + ' id="image_1" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_2") {
                    img2Content = link;
                    document.getElementById("image_2_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img2Content + ' id="image_2" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_3") {
                    img3Content = link;
                    document.getElementById("image_3_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img3Content + ' id="image_3" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_4") {
                    img4Content = link;
                    document.getElementById("image_4_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img4Content + ' id="image_4" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_5") {
                    img5Content = link;
                    document.getElementById("image_5_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img5Content + ' id="image_5" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_6") {
                    img6Content = link;
                    document.getElementById("image_6_show").innerHTML = '<img class="input-img rounded mx-auto d-block" src=' + img6Content + ' id="image_6" width="160px" data-toggle="modal" data-target="#photo-modal" onclick="infoId(this)"/>';
                }
                if (state == "image_7") {
                    img7Content = link;
                    let fn = new Date().getTime() + "_" + (Math.floor(Math.random() * 9999999999) + 1000000000) + ".jpeg";
                    newImage = {
                            name: fn,
                            data: link
                    };
                }
            }
        }

        $("#t_splacing").click(function () {
            isImg1 = true;
            isImg2 = false;
            isImg3 = false;
            isImg4 = false;
            isImg5 = false;
            isImg6 = false;
            isImg7 = false;
        });

        $("#t_innerframe").click(function () {
             isImg1 = false;
            isImg2 = true;
            isImg3 = false;
            isImg4 = false;
            isImg5 = false;
            isImg6 = false;
            isImg7 = false;
        });

        $("#t_endlabel").click(function () {
            isImg1 = false;
            isImg2 = false;
            isImg3 = true;
            isImg4 = false;
            isImg5 = false;
            isImg6 = false;
            isImg7 = false;
        });
        $("#t_alufoil").click(function () {
            isImg1 = false;
            isImg2 = false;
            isImg3 = false;
            isImg4 = true;
            isImg5 = false;
            isImg6 = false;
            isImg7 = false;
        });

        $("#t_intiket").click(function () {
            isImg1 = false;
            isImg2 = false;
            isImg3 = false;
            isImg4 = false;
            isImg5 = true;
            isImg6 = false;
            isImg7 = false;
        });

        $("#t_glue").click(function () {
            isImg1 = false;
            isImg2 = false;
            isImg3 = false;
            isImg4 = false;
            isImg5 = false;
            isImg6 = true;
            isImg7 = false;
        });

        $("#t_cwl").click(function () {
            isImg1 = false;
            isImg2 = false;
            isImg3 = false;
            isImg4 = false;
            isImg5 = false;
            isImg6 = false;
            isImg7 = true;
        });
        var counterImageComponent = 1;
        var counterSaveImage = 1;
        $(document).ready(function () {
            defaultDisplay();

            $("#photo-modal").on('next', function (e, index, info) {
                if (!selected) {
                    info.shouldReturn = true;
                    return;
                }
                console.log(index)
                switch (index) {
                    case 0:
                        const carousel = $(this).find('.carousel-item.active').next();
                        $(carousel).find("#title").html("Take picture for " + selected);

                        selectedPhotoCategory = selected;
                        break;
                    case 1:
                        renderImage(jpegUrl, state);
                        if (!isImg7) {
                            info.shouldHide = true;
                            if (counterImageComponent >= 3) {
                                $('#loading_overlay').removeClass('d-none');
                                $("#btnSaveDraft").trigger('click');
                            } else {
                                counterImageComponent++;
                            }
                        }

                        if (isUrlLink == true) switchDisplay();
                        else defaultDisplay();
                        break;
                    case 2:
                        if (isEditImage == null) {
                            imgContent.push(newImage);
                            const tr = $('#cbw ~ tfoot tr.input');
                            $(tr).find('input[name="Filename"]').val(newImage.name);
                            $(tr).find('input[name="Remark"]').val($("#photo-notes").val());
                            $('.add-to-table[data-target="cbw"]').click();
                            info.shouldHide = true;
                            if (isUrlLink == true) switchDisplay();
                            else defaultDisplay();
                        } else {
                            let isOld = false;
                            for (let i = 0; i < imgContent.length; i++) {
                                if (imgContent[i].name == isEditImage) {
                                    imgContent[i] = newImage;
                                    isOld = true;
                                }
                            }
                            if (!isOld) imgContent.push(newImage);
                            for (let i = 0; i < cbwData.length; i++) {
                                if (cbwData[i].Filename == isEditImage) {
                                    cbwData[i].Filename = newImage.name;
                                    cbwData[i].Remark = $("#photo-notes").val();
                                }
                            }
                            $("#cbw").html(generateTable(configAle.cbw.data, "cbw"));
                            ieFix();
                            isEditImage = null;
                            info.shouldHide = true;
                        }
                        if (counterSaveImage >=3) {
                            $('#loading_overlay').removeClass('d-none');
                            $("#btnSaveDraft").trigger('click');
                            counterSaveImage = -1;
                        } else {
                            counterSaveImage++;
                            break;
                        }
                        break;
                }
            });
            $('#photo-modal').on('hide', function (e) {
                $(this).find(".next").hide();
                selected = null;
            });

        });
        var isEditImage = null;
        function setEditName(name) {
            showhidecanvas(true);
            isEditImage = name;
            $("#t_cwl").click();
            isImg7 = true;
            isImg2 = false;
            isImg3 = false;
            isImg4 = false;
            isImg1 = false;
            isImg5 = false;
            isImg6 = false;
        }
        function setPreview(name) {
            console.log(imgContent);
            for (let i = 0; i < imgContent.length; i++) {
                if (imgContent[i].name == name) {
                    $("#photo-preview-name").html("Click image to zoom");
                    $("#photo-preview-image").attr("src", imgContent[i].data);
                    $('#photo-preview-image').attr('onclick', `printImage('`+imgContent[i].name+`')`);
                    return;
                }
            }
            console.log(name);
            for (let i = 0; i < cbwData.length; i++) {
                if (cbwData[i].Filename == name) {
                    $("#photo-preview-name").html("Click image to zoom");
                    $("#photo-preview-image").attr("src", fastApp.BaseUrl + "/Uploads/lph/packer/" + cbwData[i].Filename);
                    $('#photo-preview-image').attr('onclick', `printImage('` + cbwData[i].Filename + `')`);
                }
            }

        }
    </script>

    <script>
        // Video Part
        var video = document.querySelector("#videoElement");
        var hdConstraints = { video: { mandatory: { minWidth: 160, minHeight: 120 } } };
        var hhdConstraints = { video: { mandatory: { minWidth: 160, minHeight: 120 } } };
        var vgaConstraints = {
            video: {
                mandatory: {
                    maxWidth: 160,
                    maxHeight: 120
                }
            }
        };
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

        if (navigator.getUserMedia) {
            document.getElementById("demo").innerHTML = "";

            try {
                navigator.getUserMedia(hhdConstraints, handleVideo, videoError);
            } catch (error) {
                navigator.getUserMedia(hdConstraints, handleVideo, videoError);
            }
        }

        function handleVideo(stream) {
            try {
                this.srcObject = stream;
            } catch (error) {
                this.src = window.URL.createObjectURL(stream);
            }
        }

        function videoError(e) {
            // do something
        }</script>

    <script>
// Capture Image Part

        var player = document.getElementById('videoElement');
        var snapshotCanvas = document.getElementById('snapshot');
        var captureButton = document.getElementById('capture');
        var captureButton3 = document.getElementById('capture3');
        var textBottom = document.getElementById('saveText');

        var canvas = document.querySelector('canvas');
        var ctx = canvas.getContext('2d');
        var txfname = "img_text";
        var XdatStr = 'date';

        textBottom.addEventListener('click', function () {
            var temp = new Date();
            var minth = 1 + temp.getMonth();
            var dateStr = temp.getFullYear() + '_' +
                minth + '_' +
                temp.getDate() + '-' +
                temp.getHours() + '_' +
                temp.getMinutes() + '_' +
                temp.getSeconds();
            XdateStr = dateStr;
            txfname = 'IMG_' + dateStr;

            saveTextAsFile(txfname);
            pcanvas2blob().then(download2X);

            document.getElementById("demo").innerHTML = "saved ";

        });

        captureButton.addEventListener('click', function () {
            document.getElementById("demo").innerHTML = "Reading PDF417.";

            var VH = 1080;
            var VW = 1920;

            VH = video.videoHeight;
            VW = video.videoWidth;

            ctx.canvas.width = VW;
            ctx.canvas.height = VH;

            ctx.drawImage(video, 0, 0);


            var imgd = ctx.getImageData(0, 0, VW, VH);
            var pix = imgd.data;

            var nDataBytes = VH * VW * 4;

            var pdf417Heap = new Uint8Array(Module.HEAPU8.buffer, 1028);

            var buf = Module._malloc(nDataBytes);
            Module.HEAPU8.set(pix, buf);

            // Draw the ImageData at the given (x,y) coordinates.
            ctx.putImageData(imgd, 0, 0);

            var b = _pdf417JS(buf, VH, VW, 1024);

            var heapBu = new Uint8Array(Module.HEAPU8.buffer, buf, 1028);
            var vanz = bin2Strung(heapBu);


            if (b <= 0) {
                vanz = "No Read.";
            }

            Module._free(buf);
            document.getElementById("demo").innerHTML = vanz;

        });

        captureButton3.addEventListener('click', function () {
            document.getElementById("demo").innerHTML = " OCRing MRZ. ";

            var VH = 1080;
            var VW = 1920;
            VH = video.videoHeight;
            VW = video.videoWidth;

            ctx.canvas.width = VW;
            ctx.canvas.height = VH;

            ctx.drawImage(video, 0, 0);

            var imgd = ctx.getImageData(0, 0, VW, VH);
            var pix = imgd.data;

            var nDataBytes = VH * VW * 4; //1280*720*4;

            var pdf417Heap = new Uint8Array(Module.HEAPU8.buffer, 1028);

            var bluf = Module._malloc(nDataBytes);
            Module.HEAPU8.set(pix, bluf);


            // Draw the ImageData at the given (x,y) coordinates.
            ctx.putImageData(imgd, 0, 0);

            var c = _DLreadJS(bluf, VH, VW, 1024);

            var heapBuc = new Uint8Array(Module.HEAPU8.buffer, bluf, 1028);
            var vanc = bin2Strung(heapBuc);

            if (c <= 0) {
                vanc = "No Read.";
            }
            Module._free(bluf);
            document.getElementById("demo").innerHTML = vanc;
        });

        snapHat.addEventListener('click', function () {
            document.getElementById("demo").innerHTML = "Image captured";

            takeASnap();
            showhidecanvas(false);
            //.then(download);
        });

        var state = "";
        var jpegUrl;
        function takeASnap() {


            //canvas.width = 160;//video.videoWidth; // set its size to the one of the video
            //canvas.height = 120;// video.videoHeight;
            //ctx.drawImage(video, 0, 0, 160, 120); // the video
            canvas.width = 1280;//video.videoWidth; // set its size to the one of the video
            canvas.height = 720;// video.videoHeight;
            ctx.drawImage(video, 0, 0, 1280, 720); // the video

            jpegUrl = ctx.canvas.toDataURL("image/jpeg"); // get base64 output - no longer using toBlob

            @*for (var i = 0; i < max; i++) {
                if (isImg[i] == true) {
                    state = "image_"+(i+1)+"";
                }
                }
                @*if (isImg[1] == true) {
                    state = "image_2";
                }
                if (isImg[2] == true) {
                    state = "image_3";
                }*@

        @* renderImage(jpegUrl, state);*@
                if (isImg1 == true) {
                    state = "image_1";
                }
                if (isImg2 == true) {
                    state = "image_2";
                }
                if (isImg3 == true) {
                    state = "image_3";
                }
                 if (isImg4 == true) {
                    state = "image_4";
                }
                if (isImg5 == true) {
                    state = "image_5";
                }
                if (isImg6 == true) {
                    state = "image_6";
                }
                if (isImg7 == true) {
                    state = "image_7";
                }


            }

            function pcanvas2blob() {
                return new Promise((res, rej) => {
                    canvas.toBlob(res, 'image/jpeg'); // request a Blob from the canvas
                });
            }

            function download2X(blob) {
                // uses the <a download> to download a Blob
                let a = document.createElement('a');
                a.href = URL.createObjectURL(blob);

                a.download = 'IMG_' + XdateStr + '.jpg';
                document.body.appendChild(a);
                a.click();
            }

            function download(blob) {
                // uses the <a download> to download a Blob
                let a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                var temp = new Date();
                var minth = 1 + temp.getMonth();
                var dateStr = temp.getFullYear() + '_' +
                    minth + '_' +
                    temp.getDate() + '-' +
                    temp.getHours() + '_' +
                    temp.getMinutes() + '_' +
                    temp.getSeconds();

                a.download = 'IMG_' + dateStr + '.jpg';
                document.body.appendChild(a);
                a.click();
            }


            function download_png(blob) {
                // uses the <a download> to download a Blob
                let a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                var temp = new Date();
                var minth = 1 + temp.getMonth();
                var dateStr = temp.getFullYear() + '_' +
                    minth + '_' +
                    temp.getDate() + '-' +
                    temp.getHours() + '_' +
                    temp.getMinutes() + '_' +
                    temp.getSeconds();
                a.download = 'IMG_' + dateStr + '.png';
                document.body.appendChild(a);
                a.click();
            }

            function canvaSnap() {
                return new Promise((res, rej) => {
                    canvas.toBlob(res, 'image/png'); // request a Blob from the canvas
                });
            }

            function saveTextAsFile(txt_name) {

                var ocr_text = document.getElementById("demo").innerHTML
                var res = ocr_text.replace(/<br>/g, "\r\n");
                var res2 = res.replace(/&lt;/g, '<');

                var blab = new Blob([res2], { type: 'text/plain' });

                let a = document.createElement('a');
                a.href = URL.createObjectURL(blab);
                a.download = txt_name + '.txt';
                document.body.appendChild(a);

                a.click();
            }

            function saveImageAndText(fname) {

                var ocr_text = document.getElementById("demo").innerHTML
                var blab = new Blob([ocr_text], { type: 'text/plain' });

                let a = document.createElement('a');
                a.href = URL.createObjectURL(blab);
                a.download = txt_name + '.txt';
                document.body.appendChild(a);
                a.click();
            }</script>
    <script>
        var sloftopack = 10;
        var boxtopack = 600;
        var isUCOOL = false;
        $(window).load(function()
        {
            getCRR();

            // betty: ambil data setiap menit
            setInterval(function () {
                getCRR();
            }, 180 * 1000);
         });

        $("#machInfo").on('select2:select', function (e) {
            getLastStock();
            getCRR();
            getDesignSpeed();
        });

        $("#brandInfo").on('select2:select', function (e) {
            getSlofToPack();
            countResProduct();
        });

        function getSlofToPack() {
            var brand = $("#brandInfo").val();
            if (brand != "") {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("GetSlofToPack", "Packer")",
                    data: JSON.stringify({
                        brand: brand
                    }),
                    async: false,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        console.log(result.Status);
                        if (result.Status == true) {
                            sloftopack = result.slof;
                            boxtopack = result.box;
                            isUCOOL = result.isUCOOL;
                        } else {
                            sloftopack = 10;
                            boxtopack = 600;
                            isUCOOL = false;
                        }
                    }
                });
            }
        }

        function getDesignSpeed() {
            var machine = $("#machInfo").val();
            if (machine != "") {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("GetDesignSpeed", "Packer")",
                    data: JSON.stringify({
                        machine: machine
                    }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        console.log(result.Status);
                        if (result.Status == true) {
                            $('#PackerMachineDesignSpeed').val(result.speed);
                            $('#CellophanerMachineDesignSpeed').val(result.cello);
                        } else {
                            $('#PackerMachineDesignSpeed').val(0);
                            $('#CellophanerMachineDesignSpeed').val(0);
                        }
                    }
                });
            }
        }

        function getLastStock() {
            var shift = $("#shift").val();
            var machine = $("#machInfo").val();
            if (machine != "") {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("GetLastStock", "Packer")",
                    data: JSON.stringify({
                        machine: machine,
                        LPHID: @(Model.LPH.ID)
                    }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        console.log(result);
                        if (result.Status == 'True') {
                            $('#InitialSlof').val(result.slof);
                            $('#InitialZB').val(result.zb);
                            $('#InitialTB').val(result.tb);

                            var tsTotal = parseInt(result.valC) + parseInt(result.valD) + parseInt(result.valE);
                            $('#OpeningStockTS').val(tsTotal);

                            $('#PackinMachine').val(result.valF);
                            $('#PackinSamplingCabinet').val(result.valG);
                            $('#PackoutsideMachine').val(result.valH);
                        } else {
                            $('#InitialSlof').val(0);
                            $('#InitialZB').val(0);
                            $('#InitialTB').val(0);
                        }
                        countTotal();
                        countTotalSlof();
                    }
                });
            }
        }
        $('#BandrolWestReceived,#WIPfromRework,#WIPfromManual,#TotalOpening').on('change', function () {
            countTotal();
            totalClosing();
        });
        function toInt(a) {
            return parseInt((a == null || a == "" || isNaN(a)) ? 0 : a);
        }
        function countTotal() {
            var opSTS = $('#OpeningStockTS').val();
            var opR = $('#BandrolWestReceived').val();
            var opPM = $('#PackinMachine').val();
            var opPSC = $('#PackinSamplingCabinet').val();
            var opPSM = $('#PackoutsideMachine').val();

            var opWIPR = $('#WIPfromRework').val();
            var opWIPM = $('#WIPfromManual').val();
            var TotalOpening = toInt(opSTS) + toInt(opR) + toInt(opPM) + toInt(opPSC) + toInt(opPSM) + toInt(opWIPR) + toInt(opWIPM);
            $('#TotalOpening').val(TotalOpening);

        }
        function getCRR() {
            console.log("manggil CRR");
            var shift = $("#shift").val();
            var machine = $("#machInfo").val();
            if (machine != "") {
                $.ajax({
                type: "POST",
                url: "@Url.Action("GetCRR", "Packer")",
                data: JSON.stringify({
                    shift: shift,
                    machine: machine
                }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    console.log(result);
                    if (result.Status == true) {
                        $('#crrkg').val(result.crr);
                    } else {
                    }
                }
            });
            }
            countCRRPercent();
        }
    </script>
    <script>
        function bin2Strung(array) {
            var result = "";
            var max = 2048;
            for (var i = 0; i < max; i++) {
                var v = String.fromCharCode(array[i]);

                if (array[i] == 10) {
                    result += "<br/>";
                }
                else {
                    if (array[i] == 60) {
                        //result += "&#60";
                        result += "&lt";
                    }
                    else {
                        result += String.fromCharCode(array[i]);
                    }
                }
                if (array[i] == 0) {
                    i = max;
                }
            }
            return result;
        }

        function myFunction() {
            document.getElementById("demo").innerHTML = "Doing My Best!";
        }</script>

    <script>
        function countUse() {
            var accept = $('#BandrolAccept').val() != "" ? $('#BandrolAccept').val() : 0;
            var reject = $('#BandrolRejected').val() != "" ? $('#BandrolRejected').val() : 0;
            var final = $('#BandrolFinal').val() != "" ? $('#BandrolFinal').val() : 0;
            var destroy = $('#BandrolDestroy').val() != "" ? $('#BandrolDestroy').val() : 0;
            //var claim = $('#BandrolClaim').val() != "" ? $('#BandrolClaim').val() : 0;

            var use = accept - reject - final - destroy;//- claim;
            $('#BandrolUse').val(use);

            countLose();
        };
        function countLose() {
            var packResult = $('#ResultProduct').val();
            var useBandrol = $('#BandrolUse').val();

            $('#span-warning').remove();
            if (packResult != "" && useBandrol != "") {
                var lost = packResult - useBandrol;
                $('#BandrolPackUse').val(lost);
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("CheckLimitation", "Packer")",
                    data: JSON.stringify({
                        value: lost
                    }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        console.log(result.Status);
                        if (result.Status == 'Warning') {
                            $('#BandrolPackUse').parent().parent().append($('<span>', {
                                style: "color:red; font-size:10px",
                                id: "span-warning",
                                html: '<i class="fas fa-exclamation-triangle"></i> Value must be between '+result.minimum+" and "+result.maximum,
                                class: 'col-12 col-form-label',
                            }));
                            $('#BandrolPackUse').val("");
                        }
                    }
                });
            }
        };
        function countRealCello() {

            var cell_design_speed =$('#PackerMachineDesignSpeed').val() != "" ? $('#PackerMachineDesignSpeed').val() : 0;
            var cell_working_time = $('#PackerMachineWorkingTime').val() != "" ? $('#PackerMachineWorkingTime').val() : 0;

            var celloReal = $('#CellophanerReal').val() != "" ? $('#CellophanerReal').val() : 0;

            var cell_realPercent = 0;
            if (parseInt(cell_design_speed) * parseInt(cell_working_time) != 0 && celloReal!=0 ) {
                cell_realPercent = celloReal / (cell_design_speed * cell_working_time);
                cell_realPercent = cell_realPercent * 100;
            }

            $('#CelloRealPercentage').val(cell_realPercent);
        };
        function countRealPacker() {

            var pack_design_speed =$('#PackerMachineDesignSpeed').val() != "" ? $('#PackerMachineDesignSpeed').val() : 0;
            var pack_working_time =$('#PackerMachineWorkingTime').val() != "" ? $('#PackerMachineWorkingTime').val() : 0;

            var packerReal = $('#PackerReal').val() != "" ? $('#PackerReal').val() : 0;

            var pack_realPercent = 0;
            if (parseInt(pack_design_speed) * parseInt(pack_working_time) != 0 && packerReal != 0) {
                pack_realPercent = packerReal / (pack_design_speed * pack_working_time);
                pack_realPercent = pack_realPercent * 100;
            }

            $('#PackerRealPercentage').val(pack_realPercent);
        };
        function countRejectPacker() {
           // var production_volume = $('#ResultPack').val();
            var PackerReject =  $('#PackerReject').val() != "" ? $('#PackerReject').val() : 0;
            var packerReal = $('#PackerReal').val() != "" ? $('#PackerReal').val() : 0;

            var pack_rejectPercent = 0;
            if (PackerReject != 0) {
                pack_rejectPercent = parseInt(PackerReject) / (parseInt(PackerReject) + parseInt(packerReal));
                pack_rejectPercent = pack_rejectPercent * 100;
            }
            $('#PackerRejectPercentage').val(pack_rejectPercent);
        };
        function countRejectCello() {
            //var production_volume = $('#ResultPack').val();
            var CellophanerReject =  $('#CellophanerReject').val() != "" ? $('#CellophanerReject').val() : 0;
            var celloReal = $('#CellophanerReal').val() != "" ? $('#CellophanerReal').val() : 0;
            var cell_rejectPercent = 0;
            if (celloReal!=0) {
                cell_rejectPercent = parseInt(CellophanerReject) / (parseInt(CellophanerReject) + parseInt(celloReal));
                cell_rejectPercent = cell_rejectPercent * 100;
            }

            $('#CelloRejectPercentage').val(cell_rejectPercent);
        };
        function UptimeRealPacker() {
            let penampung1;
            let penampung2;
            let uptimePacker;
            let PackerReal1 = $('#PackerReal').val() != "" ? $('#PackerReal').val() : 0;
            let PackerMachineWorkingTime = $('#PackerMachineWorkingTime').val() != "" ? $('#PackerMachineWorkingTime').val() : 0;
            let PackerMachineDesignSpeed = $('#PackerMachineDesignSpeed').val() != "" ? $('#PackerMachineDesignSpeed').val() : 0;
            let NoDemandTimePacker = $('#NoDemandTimePacker').val() != "" ? $('#NoDemandTimePacker').val() : 0;
            penampung1 = parseFloat(PackerReal1);
            penampung2 = parseFloat(PackerMachineDesignSpeed) * (parseFloat(PackerMachineWorkingTime) - parseFloat(NoDemandTimePacker));
            uptimePacker = penampung1 / penampung2 * 100;
            $('#UptimePacker').val(uptimePacker.toFixed(2));
        };

        function UptimeRealCello() {
            let penampung1;
            let penampung2;
            let uptimeCelo;
            let CellophanerReal1 = $('#CellophanerReal').val() != "" ? $('#CellophanerReal').val() : 0;
            let CellophanerMachineWorkingTime = $('#CellophanerMachineWorkingTime').val() != "" ? $('#CellophanerMachineWorkingTime').val() : 0;
            let CellophanerMachineDesignSpeed = $('#CellophanerMachineDesignSpeed').val() != "" ? $('#CellophanerMachineDesignSpeed').val() : 0;
            let NoDemandTimeCelo = $('#NoDemandTimeCelo').val() != "" ? $('#NoDemandTimeCelo').val() : 0;
            penampung1 = parseFloat(CellophanerReal1);
            penampung2 = parseFloat(CellophanerMachineDesignSpeed) * (parseFloat(CellophanerMachineWorkingTime) - parseFloat(NoDemandTimeCelo));
            uptimeCelo = penampung1 / penampung2 * 100;
            $('#UptimeCelo').val(uptimeCelo.toFixed(2));
        };
        //function countMissedPacker() {
        //    var production_volume = $('#ResultPack').val();
        //    var PackerMissed = $('#PackerMissed').val();

        //    var pack_reject = 0;
        //    if (parseInt(production_volume) != 0 || isNaN(production_volume) == true) {
        //        pack_reject = PackerMissed / production_volume;
        //    }

        //    $('#PackerMissedPercentage').val(pack_reject);
        //};
        //function countMissedCello() {
        //    var production_volume = $('#ResultPack').val();
        //    var CellophanerMissed = $('#CellophanerMissed').val();
        //    var cell_reject = 0;
        //    if (parseInt(production_volume) != 0 || isNaN(production_volume) == true) {
        //        cell_reject = CellophanerMissed / production_volume;
        //    }

        //    $('#CelloMissedPercentage').val(cell_reject);
        //};
        function countCRRPercent() {
            var crrkg = $('#crrkg').val();
            var volumekg = $('#volumekg').val();

            var crr = 0;
            if (parseInt(volumekg) != 0 || parseInt(crrkg) != 0 || isNaN(volumekg) == true || isNaN(crrkg) == true) {
                var pembagi = parseInt(crrkg) + parseInt(volumekg);
                console.log(pembagi);
                crr = (crrkg / pembagi) * 100;
            }

            $('#ResultCRR').val(crr);
        };
        $('#crrkg').focusout(function () {
            countCRRPercent();
        });

        $('#volumekg').focusout(function () {
            countCRRPercent();
        });
        $('#ResultPack').focusout(function () {
            countLose();
            countRealPacker();
            countRealCello();
            countRejectPacker();
            countRejectCello();
            //countMissedPacker();
            //countMissedCello();
            //$('#ResultProduct').val($('#ResultPack').val())
        });

        $('#CellophanerMissed').focusout(function () {
            //countMissedCello();
        });

        $('#PackerMissed').focusout(function () {
            //countMissedPacker();
        });

        $('#CellophanerReject').focusout(function () {
            countRejectCello();
        });

        $('#PackerReject').focusout(function () {
            countRejectPacker();
        });

        $('#PackerMachineDesignSpeed').focusout(function () {
             countRealCello();
            countRealPacker();
            UptimeRealPacker();
        });

        $('#CellophanerMachineDesignSpeed').focusout(function () {
            countRealCello();
            UptimeRealCello();
        });

        $('#PackerMachineWorkingTime').focusout(function () {
            countRealPacker();
            countRealCello();
            UptimeRealPacker();
        });
        $('#QtyPackperCasePacker').focusout(function () {
            countRealCello();
        });

        $('#CellophanerMachineWorkingTime').focusout(function () {
            countRealCello();
            UptimeRealCello();
        });
        $('#QtyPackperCaseCelo').focusout(function () {
            countRealCello();
        });

        $('#BandrolAccept').focusout(function () {
            countUse();
        });

        $('#BandrolRejected').focusout(function () {
            countUse();
        });

        $('#BandrolFinal').focusout(function () {
            countUse();
        });

        $('#BandrolDestroy').focusout(function () {
            countUse();
        });

        $('#BandrolClaim').focusout(function () {
            countUse();
        });
        $('#PackerReal').focusout(function () {
            countRealPacker();
            countRejectPacker();
            UptimeRealPacker();
        });
         $('#CellophanerReal').focusout(function () {
             countRealCello();
             countRejectCello();
             UptimeRealCello();
        });
        $('#NoDemandTimePacker').focusout(function () {
            UptimeRealPacker();
        });
        $('#NoDemandTimeCelo').focusout(function () {
            UptimeRealCello();
        });

    </script>
    <script>

        function countResProduct() {

            var initialSlof = $('#InitialSlof').val() != "" ? $('#InitialSlof').val() : 0;
            var initialTB = $('#InitialTB').val() != "" ? $('#InitialTB').val() : 0;

            var reworkMachSlof = $('#ReworkMachineSlof').val() != "" ? $('#ReworkMachineSlof').val() : 0;
            var reworkMachTB = $('#ReworkMachineTB').val() != "" ? $('#ReworkMachineTB').val() : 0;

            var receiveSlof = $('#ReceiveReworkSlof').val() != "" ? $('#ReceiveReworkSlof').val() : 0;
            var receiveTB = $('#ReceiveReworkTB').val() != "" ? $('#ReceiveReworkTB').val() : 0;

            var qcSlof = $('#QCSlof').val() != "" ? $('#QCSlof').val() : 0;
            var qcTB = $('#QCTB').val() != "" ? $('#QCTB').val() : 0;

            var lastSlof = $('#LastStockSlof').val() != "" ? $('#LastStockSlof').val() : 0;
            var lastTB = $('#LastStockTB').val() != "" ? $('#LastStockTB').val() : 0;

            var celloReal = $('#CellophanerReal').val() != "" ? $('#CellophanerReal').val() : 0;
            var boxRes = $('#ResultBox').val() != "" ? $('#ResultBox').val() : 0;

            var resProduct = (parseInt(lastSlof * sloftopack) + parseInt(lastTB)) + (parseInt(qcSlof * sloftopack) + parseInt(qcTB)) + parseInt(celloReal) - (parseInt(receiveSlof * sloftopack) + parseInt(receiveTB)) + (parseInt(reworkMachSlof * sloftopack) + parseInt(reworkMachTB)) - (parseInt(initialSlof * sloftopack) + parseInt(initialTB));
            countLose();

            var brandRes = $('#brandInfo option:selected').text();
            console.log(boxtopack);
            // for brand UCool & other PMID brand
            if (boxRes >= 0 && brandRes != "") {

                if (brandRes.toLowerCase().indexOf("cool") >= 0) // calculation for Ucool brand
                {
                    var resProductWithBox = resProduct + parseInt(boxRes * boxtopack);
                    resProduct = resProductWithBox - parseInt(celloReal);
                }
            }
            else {
                var resProductWithBox = 0;
            }
            $('#ResultPack').val(resProduct);
            $('#ResultProduct').val(resProduct);
        };


        $('#InitialSlof').focusout(function () {
            countResProduct();
        });
        $('#InitialTB').focusout(function () {
            countResProduct();
        });
        $('#ReworkMachineSlof').focusout(function () {
            countResProduct();
        });
        $('#ReworkMachineTB').focusout(function () {
            countResProduct();
        });
        $('#ReceiveReworkSlof').focusout(function () {
            countResProduct();
        });
        $('#ReceiveReworkTB').focusout(function () {
            countResProduct();
        });
        //$('#ReworkTB').focusout(function () {
        //    countResProduct();
        //});
        //$('#ReworkSlof').focusout(function () {
        //    countResProduct();
        //});
        $('#QCTB').focusout(function () {
            countResProduct();
        });
        $('#QCSlof').focusout(function () {
            countResProduct();
        });
        $('#LastStockSlof').focusout(function () {
            countResProduct();
        });
        $('#LastStockTB').focusout(function () {
            countResProduct();
        });

        $('#CellophanerReal').focusout(function () {
            countResProduct();
        });
        $('#ResultBox').focusout(function () {
            countResProduct();
        });

        function editInitialStock() {
            $("#iconSave").show();
            $("#iconEdit").hide();
            $('#InitialSlof').attr("disabled", false);
            $('#InitialTB').attr("disabled", false);
            $('#InitialZB').attr("disabled", false);
        }
        function disabledInitialStock() {
            $("#iconSave").hide();
            $("#iconEdit").show();
            $('#InitialSlof').attr("disabled", true);
            $('#InitialTB').attr("disabled", true);
            $('#InitialZB').attr("disabled", true);
        }
    </script>
    <script>
        function detectBrowser() {
            var ua = navigator.userAgent, tem,
                M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
            if (/trident/i.test(M[1])) {
                tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
                return 'IE ' + (tem[1] || '');
            }
            if (M[1] === 'Chrome') {
                tem = ua.match(/\b(OPR|Edge)\/(\d+)/);
                if (tem != null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
            }
            M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
            if ((tem = ua.match(/version\/(\d+)/i)) != null) M.splice(1, 1, tem[1]);
            return M.join(' ');
        };

    </script>
    <script>
        function totalClosing() {

            var Outputcase = $('#Outputcase').val() != "" ? $('#Outputcase').val() : 0;
            var TotalTSperCase = $('#TotalTSperCase').val() != "" ? $('#TotalTSperCase').val() : 0;
            var TotalTSUsed = $('#TotalTSUsed').val() != "" ? $('#TotalTSUsed').val() : 0;
            var LeftoverTSpcsbundle = $('#LeftoverTSpcsbundle').val() != "" ? $('#LeftoverTSpcsbundle').val() : 0;
            var LeftoverTSpcs = $('#LeftoverTSpcs').val() != "" ? $('#LeftoverTSpcs').val() : 0;
            var LaftoverTSinMachine = $('#LaftoverTSinMachine').val() != "" ? $('#LaftoverTSinMachine').val() : 0;
            var LeftoverTSinBadCondition = $('#LeftoverTSinBadCondition').val() != "" ? $('#LeftoverTSinBadCondition').val() : 0;
            var PackinMachineclosing = $('#PackinMachineclosing').val() != "" ? $('#PackinMachineclosing').val() : 0;
            var PackinSamplingCabinetclosing = $('#PackinSamplingCabinetclosing').val() != "" ? $('#PackinSamplingCabinetclosing').val() : 0;
            var PackoutsideMachineclosing = $('#PackoutsideMachineclosing').val() != "" ? $('#PackoutsideMachineclosing').val() : 0;
            var ClaimableTaxStamp = $('#ClaimableTaxStamp').val() != "" ? $('#ClaimableTaxStamp').val() : 0;
            var ClaimablePack = $('#ClaimablePack').val() != "" ? $('#ClaimablePack').val() : 0;
            var UnclaimableSPC = $('#UnclaimableSPC').val() != "" ? $('#UnclaimableSPC').val() : 0;
            var UnclaimableOther = $('#UnclaimableOther').val() != "" ? $('#UnclaimableOther').val() : 0;
            var QASample = $('#QASample').val() != "" ? $('#QASample').val() : 0;
            var WIPtoRework = $('#WIPtoRework').val() != "" ? $('#WIPtoRework').val() : 0;
            var TotalClosing = $('#TotalClosing').val() != "" ? $('#TotalClosing').val() : 0;
            var TotalLoss = $('#TotalLoss').val() != "" ? $('#TotalLoss').val() : 0;
            var TotalUsage = $('#TotalUsage').val() != "" ? $('#TotalUsage').val() : 0;
            var LossClosing = $('#LossClosing').val() != "" ? $('#LossClosing').val() : 0;
            var RRQClosing = $('#RRQClosing').val() != "" ? $('#RRQClosing').val() : 0;

            var OpeningStockTS = $('#OpeningStockTS').val() != "" ? $('#OpeningStockTS').val() : 0;
            var BandrolWestReceived = $('#BandrolWestReceived').val() != "" ? $('#BandrolWestReceived').val() : 0;
            var PackinMachine = $('#PackinMachine').val() != "" ? $('#PackinMachine').val() : 0;
            var PackinSamplingCabinet = $('#PackinSamplingCabinet').val() != "" ? $('#PackinSamplingCabinet').val() : 0;
            var PackoutsideMachine = $('#PackoutsideMachine').val() != "" ? $('#PackoutsideMachine').val() : 0;
            var WIPfromRework = $('#WIPfromRework').val() != "" ? $('#WIPfromRework').val() : 0;
            var WIPfromManual = $('#WIPfromManual').val() != "" ? $('#WIPfromManual').val() : 0;
            var TotalOpening = $('#TotalOpening').val() != "" ? $('#TotalOpening').val() : 0;

            //TotalTSUsed=((AxB) + C + D + E + F + G + H + I + J + K + L + M + N - X)
            //TotalClosing=(Total Closing - Total Opening)
            //TotalLoss=(Total Opening - (C + D + E + F + G + H + I + N))
            //TotalUsage=(Total Loss / Usage x 100 %)
            //=(Total Opening-Total Usage)

            TotalTSUsed = parseInt(Outputcase) * parseInt(TotalTSperCase);
            TotalClosing = TotalTSUsed + parseInt(LeftoverTSpcsbundle) + parseInt(LeftoverTSpcs) + parseInt(LaftoverTSinMachine) + parseInt(PackinMachineclosing) + parseInt(PackinSamplingCabinetclosing) + parseInt(PackoutsideMachineclosing) + parseInt(ClaimableTaxStamp) + parseInt(ClaimablePack) + parseInt(UnclaimableSPC) + parseInt(UnclaimableOther) + parseInt(QASample) + parseInt(WIPtoRework) - parseInt(LeftoverTSinBadCondition);
            TotalLoss = parseInt(TotalClosing) - parseInt(TotalOpening);
            TotalUsage = parseInt(TotalOpening) - (parseInt(LeftoverTSpcsbundle) + parseInt(LeftoverTSpcs) + parseInt(LaftoverTSinMachine) + parseInt(PackinMachineclosing) + parseInt(PackinSamplingCabinetclosing) + parseInt(PackoutsideMachineclosing) + parseInt(ClaimableTaxStamp) + parseInt(WIPtoRework));
            LossClosing = parseInt(TotalLoss) / parseInt(TotalUsage) * 100;
            RRQClosing = parseInt(TotalOpening) - parseInt(TotalUsage);

            $('#TotalTSUsed').val(TotalTSUsed);
            $('#TotalClosing').val(TotalClosing);
            $('#TotalLoss').val(TotalLoss);
            $('#TotalUsage').val(TotalUsage);
            $('#LossClosing').val(LossClosing.toFixed(2));
            $('#RRQClosing').val(RRQClosing);

        };
        $('#Outputcase').focusout(function () {
            totalClosing();
            UptimeRealPacker();
            UptimeRealCello();
        });
        $('#TotalTSperCase').focusout(function () {
            totalClosing();
        });
        $('#TotalTSUsed').focusout(function () {
            totalClosing();
        });
        $('#LeftoverTSpcsbundle').focusout(function () {
            totalClosing();
        });
        $('#LeftoverTSpcs').focusout(function () {
            totalClosing();
        });
        $('#LaftoverTSinMachine').focusout(function () {
            totalClosing();
        });
        $('#LeftoverTSinBadCondition').focusout(function () {
            totalClosing();
        });
        $('#PackinMachineclosing').focusout(function () {
            totalClosing();
        });
        $('#PackinSamplingCabinetclosing').focusout(function () {
            totalClosing();
        });
        $('#PackoutsideMachineclosing').focusout(function () {
            totalClosing();
        });
        $('#ClaimableTaxStamp').focusout(function () {
            totalClosing();
        });
        $('#ClaimablePack').focusout(function () {
            totalClosing();
        });
        $('#UnclaimableSPC').focusout(function () {
            totalClosing();
        });
        $('#UnclaimableOther').focusout(function () {
            totalClosing();
        });
        $('#QASample').focusout(function () {
            totalClosing();
        });
        $('#WIPtoRework').focusout(function () {
            totalClosing();
        });
        $('#TotalClosing').focusout(function () {
            totalClosing();
        });
        $('#TotalLoss').focusout(function () {
            totalClosing();
        });
        $('#TotalUsage').focusout(function () {
            totalClosing();
        });
        $('#LossClosing').focusout(function () {
            totalClosing();
        });
        $('#RRQClosing').focusout(function () {
            totalClosing();
        });
    </script>
    <script>
        function printImage(name) {
            for (let i = 0; i < imgContent.length; i++) {
                if (imgContent[i].name == name) {
                    let dataimage = new Image();
                    dataimage.src = imgContent[i].data;

                    let windowOpen = window.open("");
                    windowOpen.document.write(dataimage.outerHTML);
                    return;
                }
            }
            for (let i = 0; i < cbwData.length; i++) {
                if (cbwData[i].Filename == name) {
                    pwin = window.open(fastApp.BaseUrl + "/Uploads/lph/packer/" + cbwData[i].Filename, "_blank");
                }
            }
        }
        function printImage1(element, child) {
            const imagedata = $('#' + element).find('#' + child).attr('src');
            if (imagedata.length > 200) {
                let dataimage = new Image();
                let windowOpen = window.open("");
                dataimage.src = imagedata;
                windowOpen.document.write(dataimage.outerHTML);
                console.log(imagedata);
                return;
            } else {
                pwin = window.open(imagedata, "_blank");
            }
        }
    </script>
    <script>
        //edit opening
        function enableEditOpening() {
            $('#SaveOpening').removeClass('d-none');
            $('#EditOpening').addClass('d-none');
            $('#OpeningStockTS,#BandrolWestReceived,#PackinMachine,#PackinSamplingCabinet,#PackoutsideMachine,#TotalOpening').attr('disabled', false);
        }
        function disableEditOpening() {
            $('#EditOpening').removeClass('d-none');
            $('#SaveOpening').addClass('d-none');
            $('#OpeningStockTS,#BandrolWestReceived,#PackinMachine,#PackinSamplingCabinet,#PackoutsideMachine,#TotalOpening').attr('disabled', true);
        }
    </script>
    <script>
        //hide canvas waktu pertama buka webcam
        function showhidecanvas(hidecanvas) {
            if (hidecanvas == true) {
                $('canvas').hide();
                $('#demo').hide();
                $('#btnNextPhoto').hide();
                hidecanvas = false;
            } else {
                $('canvas').show();
                $('#demo').show();
                $('#btnNextPhoto').show();
                hidecanvas = true;
            }
        }

    </script>
    <script>
        function totalClosingSlof() {

            var OutputcaseSlof = $('#OutputcaseSlof').val() != "" ? $('#OutputcaseSlof').val() : 0;
            var TotalTSperCaseSlof = $('#TotalTSperCaseSlof').val() != "" ? $('#TotalTSperCaseSlof').val() : 0;
            var TotalTSUsedSlof = $('#TotalTSUsedSlof').val() != "" ? $('#TotalTSUsedSlof').val() : 0;
            var LeftoverTSpcsbundleSlof = $('#LeftoverTSpcsbundleSlof').val() != "" ? $('#LeftoverTSpcsbundleSlof').val() : 0;
            var LeftoverTSpcsSlof = $('#LeftoverTSpcsSlof').val() != "" ? $('#LeftoverTSpcsSlof').val() : 0;
            var LaftoverTSinMachineSlof = $('#LaftoverTSinMachineSlof').val() != "" ? $('#LaftoverTSinMachineSlof').val() : 0;
            var LeftoverTSinBadConditionSlof = $('#LeftoverTSinBadConditionSlof').val() != "" ? $('#LeftoverTSinBadConditionSlof').val() : 0;
            var PackinMachineclosingSlof = $('#PackinMachineclosingSlof').val() != "" ? $('#PackinMachineclosingSlof').val() : 0;
            var PackinSamplingCabinetclosingSlof = $('#PackinSamplingCabinetclosingSlof').val() != "" ? $('#PackinSamplingCabinetclosingSlof').val() : 0;
            var PackoutsideMachineclosingSlof = $('#PackoutsideMachineclosingSlof').val() != "" ? $('#PackoutsideMachineclosingSlof').val() : 0;
            var ClaimableTaxStampSlof = $('#ClaimableTaxStampSlof').val() != "" ? $('#ClaimableTaxStampSlof').val() : 0;
            var ClaimablePackSlof = $('#ClaimablePackSlof').val() != "" ? $('#ClaimablePackSlof').val() : 0;
            var UnclaimableSPCSlof = $('#UnclaimableSPCSlof').val() != "" ? $('#UnclaimableSPCSlof').val() : 0;
            var UnclaimableOtherSlof = $('#UnclaimableOtherSlof').val() != "" ? $('#UnclaimableOtherSlof').val() : 0;
            var QASampleSlof = $('#QASampleSlof').val() != "" ? $('#QASampleSlof').val() : 0;
            var WIPtoReworkSlof = $('#WIPtoReworkSlof').val() != "" ? $('#WIPtoReworkSlof').val() : 0;
            var TotalClosingSlof = $('#TotalClosingSlof').val() != "" ? $('#TotalClosingSlof').val() : 0;
            var TotalLossSlof = $('#TotalLossSlof').val() != "" ? $('#TotalLossSlof').val() : 0;
            var TotalUsageSlof = $('#TotalUsageSlof').val() != "" ? $('#TotalUsageSlof').val() : 0;
            var LossClosingSlof = $('#LossClosingSlof').val() != "" ? $('#LossClosingSlof').val() : 0;
            var RRQClosingSlof = $('#RRQClosingSlof').val() != "" ? $('#RRQClosingSlof').val() : 0;

            var OpeningStockTSSlof = $('#OpeningStockTSSlof').val() != "" ? $('#OpeningStockTSSlof').val() : 0;
            var BandrolWestReceivedSlof = $('#BandrolWestReceivedSlof').val() != "" ? $('#BandrolWestReceivedSlof').val() : 0;
            var PackinMachineSlof = $('#PackinMachineSlof').val() != "" ? $('#PackinMachineSlof').val() : 0;
            var PackinSamplingCabinetSlof = $('#PackinSamplingCabinetSlof').val() != "" ? $('#PackinSamplingCabinetSlof').val() : 0;
            var PackoutsideMachineSlof = $('#PackoutsideMachineSlof').val() != "" ? $('#PackoutsideMachineSlof').val() : 0;
            var WIPfromReworkSlof = $('#WIPfromReworkSlof').val() != "" ? $('#WIPfromReworkSlof').val() : 0;
            var WIPfromManualSlof = $('#WIPfromManualSlof').val() != "" ? $('#WIPfromManualSlof').val() : 0;
            var TotalOpeningSlof = $('#TotalOpeningSlof').val() != "" ? $('#TotalOpeningSlof').val() : 0;

            //TotalTSUsed=((AxB) + C + D + E + F + G + H + I + J + K + L + M + N - X)
            //TotalClosing=(Total Closing - Total Opening)
            //TotalLoss=(Total Opening - (C + D + E + F + G + H + I + N))
            //TotalUsage=(Total Loss / Usage x 100 %)
            //=(Total Opening-Total Usage)

            TotalTSUsedSlof = parseInt(OutputcaseSlof) * parseInt(TotalTSperCaseSlof);
            TotalClosingSlof = TotalTSUsedSlof + parseInt(LeftoverTSpcsbundleSlof) + parseInt(LeftoverTSpcsSlof) + parseInt(LaftoverTSinMachineSlof) + parseInt(PackinMachineclosingSlof) + parseInt(PackinSamplingCabinetclosingSlof) + parseInt(PackoutsideMachineclosingSlof) + parseInt(ClaimableTaxStampSlof) + parseInt(ClaimablePackSlof) + parseInt(UnclaimableSPCSlof) + parseInt(UnclaimableOtherSlof) + parseInt(QASampleSlof) + parseInt(WIPtoReworkSlof) - parseInt(LeftoverTSinBadConditionSlof);
            TotalLossSlof = parseInt(TotalClosingSlof) - parseInt(TotalOpeningSlof);
            TotalUsageSlof = parseInt(TotalOpeningSlof) - (parseInt(LeftoverTSpcsbundleSlof) + parseInt(LeftoverTSpcsSlof) + parseInt(LaftoverTSinMachineSlof) + parseInt(PackinMachineclosingSlof) + parseInt(PackinSamplingCabinetclosingSlof) + parseInt(PackoutsideMachineclosingSlof) + parseInt(ClaimableTaxStampSlof) + parseInt(WIPtoReworkSlof));
            LossClosingSlof = parseInt(TotalLossSlof) / parseInt(TotalUsageSlof) * 100;
            RRQClosingSlof = parseInt(TotalOpeningSlof) - parseInt(TotalUsageSlof);

            $('#TotalTSUsedSlof').val(TotalTSUsedSlof);
            $('#TotalClosingSlof').val(TotalClosingSlof);
            $('#TotalLossSlof').val(TotalLossSlof);
            $('#TotalUsageSlof').val(TotalUsageSlof);
            $('#LossClosingSlof').val(LossClosingSlof.toFixed(2));
            $('#RRQClosingSlof').val(RRQClosingSlof);

        };
        $('#OutputcaseSlof').focusout(function () {
            totalClosingSlof();
            UptimeRealPacker();
            UptimeRealCello();
        });
        $('#TotalTSperCaseSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#TotalTSUsedSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#LeftoverTSpcsbundleSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#LeftoverTSpcsSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#LaftoverTSinMachineSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#LeftoverTSinBadConditionSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#PackinMachineclosingSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#PackinSamplingCabinetclosingSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#PackoutsideMachineclosingSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#ClaimableTaxStampSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#ClaimablePackSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#UnclaimableSPCSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#UnclaimableOtherSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#QASampleSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#WIPtoReworkSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#TotalOpeningSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#TotalLossSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#TotalUsageSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#LossClosingSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#RRQClosingSlof').focusout(function () {
            totalClosingSlof();
        });
        $('#BandrolWestReceivedSlof,#WIPfromReworkSlof,#WIPfromManualSlof,#TotalOpeningSlof').on('change', function () {
            countTotalSlof();
            totalClosingSlof();
        });
        function toIntSlof(a) {
            return parseInt((a == null || a == "" || isNaN(a)) ? 0 : a);
        }
        function countTotalSlof() {
            var opSTSSlof = $('#OpeningStockTSSlof').val();
            var opRSlof = $('#BandrolWestReceivedSlof').val();
            var opPMSlof = $('#PackinMachineSlof').val();
            var opPSCSlof = $('#PackinSamplingCabinetSlof').val();
            var opPSMSlof = $('#PackoutsideMachineSlof').val();

            var opWIPRSlof = $('#WIPfromReworkSlof').val();
            var opWIPMSlof = $('#WIPfromManualSlof').val();
            var TotalOpeningSlof = toIntSlof(opSTSSlof) + toIntSlof(opRSlof) + toIntSlof(opPMSlof) + toIntSlof(opPSCSlof) + toIntSlof(opPSMSlof) + toIntSlof(opWIPRSlof) + toIntSlof(opWIPMSlof);
            $('#TotalOpeningSlof').val(TotalOpeningSlof);

        }
    </script>

    <script>
        //hide bandrol
        function hidebandrol(id) {
            if ($('#' + id).hasClass('d-none') == true) {
                $('#' + id).removeClass('d-none');
                $("#" + id + '-hide').html("<i class='fas fa-eye-slash'></i> Hide");
            } else {
                $('#' + id).addClass('d-none');
                $("#" + id + '-hide').html("<i class='fas fa-eye'></i> Show");
            }
        }
    </script>
}
